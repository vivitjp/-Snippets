---
#-------------------------------
# React Hook Form
#-------------------------------
- KEY: pk.rhf.urls
  EXPLAIN: æ¦‚è¦ã¨Version
  BODY: |
    â–  GitHub
      https://github.com/react-hook-form/react-hook-form/releases

    â–  Version
      v7.48.2
      "engines": {
        "node": ">=12.22.0"             Node16
      },  

      v7.48.2
      "engines": {
        "node": ">=18",                 Node18
        "pnpm": "8"
      } 

    â–  URL
      https://react-hook-form.com/

      React Hook Formã‚’1å¹´ä»¥ä¸Šé‹ç”¨ã—ã¦ããŸã¡ã‚‡ã£ã¨è‰¯ãä½¿ã†ãŸã‚ã®Tips
      https://zenn.dev/yuitosato/articles/292f13816993ef

- KEY: chakra.components.api.title
  CATEGORY: API

- KEY: pk.rhf.api.useForm
  EXPLAIN: useForm & method
  BODY: |
    const method = useForm({
      mode,                             // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚°: "onChange" | "onBlur" | "onSubmit" | "onTouched" | "all"
      reValidateMode,                   // å†ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚°: "onChange" | "onBlur" | "onSubmit"

      defaultValues,                    // åˆæœŸå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã®åˆæœŸå€¤ï¼‰

      values,                           // å¤–éƒ¨ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ å€¤ã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«æ›´æ–°ã—ãŸã„å ´åˆ
      errors,                           // å¤–éƒ¨ã‹ã‚‰ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«æ›´æ–°ã—ãŸã„å ´åˆ
      resetOptions,                     // resetæ™‚ã®æŒ™å‹•åˆ¶å¾¡ï¼ˆä¾‹: keepErrors, keepDirty, keepValues ãªã©ï¼‰
      criteriaMode,                     // "all"ã§å…¨ã¦ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã€"firstError"ã§æœ€åˆã®ã¿

      shouldFocusError,                 // ã‚¨ãƒ©ãƒ¼æ™‚ã«è‡ªå‹•ã§è©²å½“ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã™ã‚‹ã‹
      delayError,                       // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’é…å»¶ã•ã›ã‚‹ï¼ˆmsæŒ‡å®šï¼‰

      shouldUseNativeValidation,        // ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³APIã‚’ä½¿ã†ã‹
      shouldUnregister,                 // ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç™»éŒ²è§£é™¤ã™ã‚‹ã‹
    });

    method: {
      register,                         // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç™»éŒ²ï¼ˆinput, selectç­‰ã«ç´ä»˜ã‘ï¼‰
      unregister,                       // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç™»éŒ²è§£é™¤ï¼ˆä¸è¦ã«ãªã£ãŸinputç­‰ï¼‰

      handleSubmit,                     // é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³â†’onSubmitå®Ÿè¡Œï¼‰
      reset,                            // ãƒ•ã‚©ãƒ¼ãƒ å€¤ãƒ»çŠ¶æ…‹ã®ãƒªã‚»ãƒƒãƒˆï¼ˆåˆæœŸå€¤ã‚„ä»»æ„å€¤ã«æˆ»ã™ï¼‰
      watch,                            // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤ã®ç›£è¦–ï¼ˆå€¤ã®å¤‰åŒ–ã‚’å–å¾—ï¼‰

      control,                          // Controllerç”¨ã®åˆ¶å¾¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆè¤‡é›‘ãªUIã‚„å¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ï¼‰

      setValue,                         // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤ã®æ‰‹å‹•è¨­å®šï¼ˆå€‹åˆ¥ã«å€¤ã‚’å¤‰æ›´ï¼‰
      getValues,                        // å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤ã®å–å¾—ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§è¿”ã™ï¼‰

      formState, ğŸ”µ                     // ãƒ•ã‚©ãƒ¼ãƒ å…¨ä½“ã®çŠ¶æ…‹ï¼ˆã‚¨ãƒ©ãƒ¼, dirty, touched, isValidç­‰ï¼‰
      getFieldState,                    // å€‹åˆ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®çŠ¶æ…‹å–å¾—ï¼ˆisDirty, isTouched, errorç­‰ï¼‰

      trigger,                          // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ‰‹å‹•å®Ÿè¡Œï¼ˆä»»æ„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ¤œè¨¼ï¼‰
      setFocus,                         // æŒ‡å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ï¼ˆã‚¨ãƒ©ãƒ¼æ™‚ã‚„UXå‘ä¸Šï¼‰

      clearErrors,                      // ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ã‚¯ãƒªã‚¢ï¼ˆå…¨ä½“ã¾ãŸã¯å€‹åˆ¥ï¼‰
      setError,                         // ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®æ‰‹å‹•è¨­å®šï¼ˆAPIã‚¨ãƒ©ãƒ¼ç­‰ã‚’åæ˜ ï¼‰
      resetField,                       // å€‹åˆ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ãƒªã‚»ãƒƒãƒˆï¼ˆåˆæœŸå€¤ã‚„ç©ºã«æˆ»ã™ï¼‰
    }

- KEY: pk.rhf.api.method.formState
  EXPLAIN: formState
  BODY: |
    â–  formState: {
      defaultValues                     
      errors                            
      isValid                           
      isDirty                           
      disabled                          

      dirtyFields                       
      touchedFields                     
      validatingFields                  

      isLoading                         // ãƒ­ãƒ¼ãƒ‰ä¸­
      isSubmitting                      // ã‚µãƒ–ãƒŸãƒƒãƒˆä¸­
      isValidating                      // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­
      isSubmitSuccessful                // ã‚µãƒ–ãƒŸãƒƒãƒˆOK
      isSubmitted                       // ã‚µãƒ–ãƒŸãƒƒãƒˆçµ‚äº†
      submitCount                       // ã‚µãƒ–ãƒŸãƒƒãƒˆå›æ•°
    }

    â–  field: {
      value,                            // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå€¤
      ref,                              // Reactã®ref
      name,                             // String: ç™»éŒ²å
      onChange: (e: )=>{},              // å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
      onBlur,                           // ãƒ­ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
      onFocus,                          // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
    },

    â–  fieldState: {
      invalid,                          // å…¨å…¥åŠ›å€¤ã®Validity
      isTouched,                        // ä¸€åº¦ã§ã‚‚ã‚¿ãƒƒãƒã•ã‚ŒãŸã‹
      isDirty,                          // å…¥åŠ›ãŒå¤‰æ›´ã•ã‚ŒãŸã‹
      error,                            // ã‚¨ãƒ©ãƒ¼æƒ…å ±
    }

#-------------------------------
# By Context
#-------------------------------
- KEY: pk.rhf.event.title
  CATEGORY: ã‚¤ãƒ™ãƒ³ãƒˆ

- KEY: pk.rhf.form.onSubmit
  EXPLAIN: onSubmit
  BODY: |
    export default function App() {
      const { register, handleSubmit } = useForm<FormValues>()
      const onSubmit: SubmitHandler<FormValues> = async(data)=>{ //éåŒæœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³
        try {
          // await fetch()
          // console.log(data)
        } catch (e) { ... }
      };

      return (
        <form onSubmit={ handleSubmit(onSubmit) }>
            * handleSubmitãŒã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹ã¨ç›´ãã« Validation ãŒèµ°ã‚‹
            * ã™ã¹ã¦ã® Validity ãŒ true ã«ãªã£ãŸã‚‰åˆã‚ã¦ onSubmit ãŒã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹
            * onSubmit ã§ã¯ãƒ‡ãƒ¼ã‚¿ã®å‡ºåŠ›ã®ã¿ã‚’æ‰±ã†
          <input {...register("firstName")} />
          ...
          <input type="submit" />
        </form>
      )
    }

#-------------------------------
# Methods
#-------------------------------
- KEY: pk.rhf.method.category
  CATEGORY: ãƒ¡ã‚½ãƒƒãƒ‰

- KEY: pk.rhf.method.reset
  EXPLAIN: Reset()
  BODY: |
    â–  ä¸»ç”¨é€”

    ãƒ»reset() ã§å…¨é …ç›®ã‚’åˆæœŸå€¤ã«æˆ»ã™
      ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å¾Œã«å…¥åŠ›å€¤ã‚’åˆæœŸåŒ–ã—ãŸã„å ´åˆ
    ãƒ»reset(values) ã§ä»»æ„ã®å€¤ã«ä¸€æ‹¬æ›´æ–°
      APIã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã§ãƒ•ã‚©ãƒ¼ãƒ å€¤ã‚’ä¸€æ‹¬æ›´æ–°ã—ãŸã„å ´åˆ
    ãƒ»ç·¨é›†ãƒ»æ–°è¦ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»APIåæ˜ ãªã©å¤šç”¨é€”
      ç·¨é›†ç”»é¢ã§ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚ã€å…ƒã®å€¤ã«æˆ»ã—ãŸã„å ´åˆ
      ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã‚„ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã§å…¨é …ç›®ã‚’ã‚¯ãƒªã‚¢ã—ãŸã„å ´åˆ

    â–  ä¾‹

    import { useForm } from "react-hook-form"

    function MyForm({ defaultValues }) {
      const { register, handleSubmit, reset } = useForm({ defaultValues })

      const onSubmit = data => {
        // APIé€ä¿¡...
        reset()                         // å…¨é …ç›®ã‚’åˆæœŸå€¤ã«æˆ»ã™
      }

      // å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã§ãƒ•ã‚©ãƒ¼ãƒ å€¤ã‚’æ›´æ–°
      useEffect(() => {
        reset(defaultValues)            // æ–°ã—ã„å€¤ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’å†åˆæœŸåŒ–
      }, [defaultValues])

      return (
        <form onSubmit={handleSubmit(onSubmit)}>
          <input {...register("name")} />
          <button type="submit">é€ä¿¡</button>
          <button type="button" onClick={() => reset()}>ãƒªã‚»ãƒƒãƒˆ</button>
        </form>
      )
    }

    â–  reset(values, options) ã® options è©³ç´°

      reset(values, {
        keepErrors,                     // ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚’ä¿æŒï¼ˆfalse:ã‚¯ãƒªã‚¢ï¼‰ã€APIã‚¨ãƒ©ãƒ¼ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆå¾Œã‚‚æ®‹ã—ãŸã„å ´åˆ
        keepDirty,                      // dirtyçŠ¶æ…‹ã‚’ä¿æŒï¼ˆfalse:åˆæœŸåŒ–ï¼‰ã€ç·¨é›†æ¸ˆã¿ï¼ˆdirtyï¼‰çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆå¾Œã‚‚ç¶­æŒã—ãŸã„å ´åˆ
        keepValues,                     // ç¾åœ¨ã®å€¤ã‚’ä¿æŒï¼ˆfalse:valuesã§ä¸Šæ›¸ãï¼‰ã€ç¾åœ¨ã®ãƒ•ã‚©ãƒ¼ãƒ å€¤ã‚’ç¶­æŒã—ãŸã„å ´åˆï¼ˆresetã§å€¤ã‚’å¤‰ãˆãŸããªã„æ™‚ï¼‰
        keepTouched,                    // touchedçŠ¶æ…‹ã‚’ä¿æŒï¼ˆfalse:åˆæœŸåŒ–ï¼‰ã€touchedï¼ˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ¸ˆã¿ï¼‰çŠ¶æ…‹ã‚’ç¶­æŒã—ãŸã„å ´åˆ
        keepIsSubmitted,                // isSubmittedçŠ¶æ…‹ã‚’ä¿æŒã€é€ä¿¡æ¸ˆã¿çŠ¶æ…‹ã‚’ç¶­æŒã—ãŸã„å ´åˆ
        keepSubmitCount,                // submitCountã‚’ä¿æŒã€é€ä¿¡å›æ•°ã‚’ç¶­æŒã—ãŸã„å ´åˆ
        keepDefaultValues,              // defaultValuesã‚’ä¿æŒï¼ˆfalse:æ–°ã—ã„å€¤ã§ä¸Šæ›¸ãï¼‰ã€defaultValuesã‚’å¤‰æ›´ã›ãšç¶­æŒã—ãŸã„å ´åˆ
        keepIsValid,                    // isValidçŠ¶æ…‹ã‚’ä¿æŒã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’ç¶­æŒã—ãŸã„å ´åˆ
        keepDirtyValues,                // dirtyãªå€¤ã®ã¿ä¿æŒï¼ˆä»–ã¯åˆæœŸåŒ–ï¼‰ã€dirtyãªå€¤ã®ã¿ç¶­æŒã—ã€ä»–ã¯åˆæœŸåŒ–ã—ãŸã„å ´åˆ
      })

    â–  ä¾‹

    // é€ä¿¡å¾Œã€dirtyçŠ¶æ…‹ã¨ã‚¨ãƒ©ãƒ¼ã ã‘ç¶­æŒ
    reset(newValues, { keepDirty: true, keepErrors: true })

    // touchedçŠ¶æ…‹ã‚‚ç¶­æŒ
    reset(newValues, { keepTouched: true })

    // ã™ã¹ã¦åˆæœŸåŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
    reset()

    â–  reset æ™‚ã«ã€ŒdefaultValues ã§ã¯ãªãã€ç¾åœ¨ã® input å€¤ã‚’ç¶­æŒã—ãŸã„ã€

    1. reset(undefined, { keepValues: true })

      ã“ã‚Œã¯ã€Œç¾åœ¨ã®ãƒ•ã‚©ãƒ¼ãƒ å€¤ï¼ˆinputå€¤ï¼‰ã‚’ãã®ã¾ã¾ç¶­æŒã€ã—ã¾ã™ã€‚
      defaultValues ã‚‚æ›´æ–°ã•ã‚Œã¾ã›ã‚“ã€‚

    2. reset(values, { keepValues: true })

      values ã‚’æ¸¡ã—ã¦ã‚‚ã€keepValues: true ã®å ´åˆã¯ã€Œç¾åœ¨ã®å€¤ã€ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚
      values ã§ä¸Šæ›¸ãã—ãŸã„å ´åˆã¯ keepValues: false ã‚’ä½¿ã†ã¹ãã§ã™ã€‚

      â€»å…¨ä½“çš„ã«ã€Œä»Šã®å€¤ã‚’ç¶­æŒã€ã™ã‚‹ãŒã€å€‹åˆ¥ã«ã€Œå€¤ãŒæœªå…¥åŠ›ï¼ˆundefinedï¼‰ã€ã®å ´åˆã®ã¿ã€values ã®å€¤ã‚’ã‚»ãƒƒãƒˆ

      name: "abc"ï¼ˆinputå€¤ã‚ã‚Šï¼‰ â†’ reset({ name: "def" }, { keepValues: true }) â†’ "abc" ã®ã¾ã¾
      age: undefinedï¼ˆinputå€¤ãªã—ï¼‰ â†’ reset({ age: 20 }, { keepValues: true }) â†’ "20" ã«ãªã‚‹

#-------------------------------
# By Context
#-------------------------------
- KEY: pk.rhf.byContext.title
  CATEGORY: FormProvider & useFormContext

- KEY: pk.rhf.byContext.parent
  EXPLAIN: è¦ª(FormProvider)
  BODY: |
    import { useForm, SubmitHandler, FormProvider } from "react-hook-form"
    import { ChildByContext } from "./ChildByContext"

    export type SimpleType = { name: string }
    const defaultValues: SimpleType = { name: "By Method" }

    export const Simple = () => {

      const method = useForm<SimpleType>({
        defaultValues,
        mode = "onBlur"                                                         // é›¢è„±æ™‚ã«Validate
      })
      const { handleSubmit } = method

      const onSubmit: SubmitHandler<SimpleType>=(data)=>{
        console.table(data)
      }

      return (
        <FormProvider {...method}>                                              // Context è¦ª
          <form onSubmit={ handleSubmit(onSubmit) }>
            <ChildByContext<SimpleType> />                                      // å­ã¸ã®å¼•æ•°ãªã—
            <button type="submit"> OK </button>
          </form>
        </FormProvider>
      )
    }

- KEY: pk.rhf.byContext.child
  EXPLAIN: å­(useFormContext)
  BODY: |
    import { useFormContext } from "react-hook-form"

    export const ChildByContext<T> = () => {
      
      const { register, formState: {errors} } = useFormContext<T>()             // å…±é€š register ã‚’å–ã‚Šå‡ºã—

      return (                                                                  // ä»¥ä¸‹ã€å…±é€š
        <div>
          <input {...register("name", { required: true })} />
          {errors.name && <span>å¿…é ˆ</span>}
        </div>
      )
    }

#-------------------------------
# By Props
#-------------------------------
- KEY: pk.rhf.byProps.title
  CATEGORY: method as Props

- KEY: pk.rhf.byProps.parent
  EXPLAIN: è¦ª
  BODY: |
    import { useForm, SubmitHandler } from "react-hook-form"
    import { ChildByMethod } from "./ChildByMethod"

    export type SimpleType = { name: string }
    const defaultValues: SimpleType = { name: "By Method" }

    export const ByMethod = () => {

      const method = useForm<SimpleType>({
        defaultValues,
        mode = "onBlur"                                                         // é›¢è„±æ™‚ã«Validate
      })
      const { handleSubmit } = method

      const onSubmit: SubmitHandler<SimpleType> = (data) => {
        console.table(data)
      }

      return (
        <section>
          <form onSubmit = { handleSubmit(onSubmit) }>
            <ChildByMethod method={method} />                                   // å­ã¸ã®å¼•æ•°: method
            <button type="submit"> OK </button>
          </form>
        </section>
      )
    }

- KEY: pk.rhf.byProps.child
  EXPLAIN: å­
  BODY: |
    import { UseFormReturn } from "react-hook-form"
    import { SimpleType } from "./RHFByMethod"

    type Props = {
      method: UseFormReturn<SimpleType, any>
    }

    export const ChildByMethod = ({ method }: Props) => {
      const { register, formState: { errors } } = method
      return (
        <div>
          <input {...register("name", { required: true })} />
          {errors.name && <span>å¿…é ˆ</span>}
        </div>
      )
    }

#-------------------------------
# Controller
#-------------------------------
- KEY: pk.rhf.Controller.title
  CATEGORY: method as Props

- KEY: pk.rhf.Controller.parent
  EXPLAIN: è¦ª
  BODY: |
    import { SubmitHandler, useForm, useWatch } from "react-hook-form"
    import { SampleControlInput } from "./SampleControlInput"
    import { useMemo, useState } from "react"

    type GFieldType = Record<string, unknown>

    //Dataå‹
    type Person = {
      name: string
      age: number
      act: number //Chakra Checkbox å‹
    }

    //Data ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
    const defaultValues = {
      name: "ä½è—¤",
      age: 55,
      act: 0,
    }

    //Data åˆ¶ç´„
    const constrain: Record<keyof Person, GFieldType> = {
      name: {
        required: "å¿…é ˆé …ç›®ã§ã™",
        minLength: { value: 4, message: "4æ–‡å­—ä»¥ä¸Šå¿…é ˆã§ã™" },
      },
      age: {
        required: "å¿…é ˆé …ç›®ã§ã™",
        min: { value: 1, message: "1ä»¥ä¸Šã®æ•°å€¤ã§ã™" },
        validate: (item: string) => !!Number(item),
        validateMessage: "æ•°å€¤ã®ã¿ã§ã™",
      },
      act: {},
    }

    export const SampleControlForm = () => {
      const method = useForm<Person>({ defaultValues, mode: "onBlur" })
      const {
        watch,
        control,
        handleSubmit,
        formState: { isValid },
      } = method

      const [inputData, setInputData] = useState("")

      const onSubmit: SubmitHandler<Person> = (data) => {
        setInputData(JSON.stringify(data, undefined, 2))
      }

      const [calcAgeMan, setCalcAgeMan] = useState(0)

      //watch ã¯ éReactive
      const handleWatch = () => {
        const age = Number(watch("age")) * 3 || 0
        setCalcAgeMan(age)
      }

      //useWatch ã¯ Reactive(å†æç”»ã«æ³¨æ„)
      const watchAge = useWatch({ control, name: "age" })
      const ageCalcAuto = useMemo(() => (Number(watchAge) || 0) * 2, [watchAge])

      return (
        <Row>
          <Column>
            <form onSubmit={handleSubmit(onSubmit)}>
              <Column>
                <Row>
                  <SampleControlInput
                    method={method}
                    target={"name"}
                    title={"æ°å"}
                    constrain={constrain.name}
                  />
                </Row>

                {/* age */}
                <Row>
                  <SampleControlInput
                    method={method}
                    target={"age"}
                    title={"å¹´é½¢"}
                    constrain={constrain.age}
                  />
                </Row>

                <Row>
                  <Div">å¹´(è‡ªå‹•)</Div>
                  <BorderDiv>{ageCalcAuto}</BorderDiv>
                </Row>

                <Row>
                  <Button" onClick={handleWatch}>
                    å¹´(æ‰‹å‹•)
                  </Button>
                  <BorderDiv>{calcAgeMan}</BorderDiv>
                </Row>

                {/* act */}
                <Row>
                  <SampleControlInput
                    method={method}
                    target={"act"}
                    title={"æœ‰åŠ¹"}
                    constrain={constrain.act}
                  />
                </Row>
                <Row>
                  <Submit value={"ä¿å­˜"} disabled={!isValid} />
                </Row>
              </Column>
            </form>
          </Column>
          <DivPre>{inputData}</DivPre>
        </Row>
      )
    }

- KEY: pk.rhf.Controller.child
  EXPLAIN: å­ <Controller>
  BODY: |
    import { Controller, Path, UseFormReturn } from "react-hook-form"
    import { Input as ChakraInput } from "@chakra-ui/react"

    type GFieldType = Record<string, unknown>

    type SampleControlInput<T extends GFieldType, R> = {
      method: UseFormReturn<T>
      target: Path<T>
      title: string
      constrain: GFieldType
    }

    export const SampleControlInput = <
      T extends GFieldType,
      R extends string | number
    >({ method, target, title, constrain }: SampleControlInput<T, R>) => {
      const { control } = method

      return (
        <Row>
          <Div>{title}</Div>
          <Controller
            render={({ field, fieldState: { error } }) => {
              const { value, ...other } = field
              return (
                <>
                  <ChakraInput {...{ ...other, value: value as R }} />
                  {error && <ErrorBox>{error?.message}</ErrorBox>}
                </>
              )
            }}
            name={target}
            control={control}
            rules={constrain}
          />
        </Row>
      )
    }

#-------------------------------
# Generic Parent
#-------------------------------
- KEY: pk.rhf.generic.title
  CATEGORY: Generic Components

- KEY: pk.rhf.generic.parent
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ è¦ª
  BODY: |
    import { useForm, UseFormProps, UseFormReturn } from "react-hook-form"

    export type GFieldType = Record<string, unknown>

    const useDefaultForm = <FormDataType extends GFieldType>(
      props: UseFormProps<FormDataType> & {
        defaultValues: FormDataType
      }
    ): UseFormReturn<FormDataType> => {
      return useForm(props)
    }

    export { useDefaultForm }

- KEY: pk.rhf.generic.child
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ å­
  BODY: |
    import { Path, UseFormReturn } from "react-hook-form"
    import { GFieldType } from "./useDefaultForm"

    type MyInput<T extends GFieldType, R> = {
      method: UseFormReturn<T>
      target: Path<T>
      constrain: GFieldType
    }

    export const MyInput = <T extends GFieldType, R extends string | number>({
      method,
      target,
      constrain,
    }: MyInput<T, R>) => {
      const { register, formState: { errors } } = method

      return (
        <Row>
          <Input {...register(target, constrain)} />
          {errors?.[target]?.message && (
            <ErrorBox>{`${errors?.[target]?.message || ""}`}</ErrorBox>
          )}
        </Row>
      )
    }

- KEY: pk.rhf.generic.sample
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ ã‚µãƒ³ãƒ—ãƒ«
  BODY: |
    import { SubmitHandler } from "react-hook-form"
    import { MyInput } from "./SampleInput"
    import { GFieldType, useDefaultForm } from "./useDefaultForm"

    //Dataå‹
    export type Person = {
      name: string
      age: number
    }

    //Data ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
    const defaultValues: Person = {
      name: "",
      age: 0,
    }

    //Data åˆ¶ç´„
    const constrain: Record<keyof Person, GFieldType> = {
      name: {
        required: "å¿…é ˆé …ç›®ã§ã™",
        minLength: { value: 4, message: "4æ–‡å­—ä»¥ä¸Šå¿…é ˆã§ã™" },
      },
      age: {
        required: "å¿…é ˆé …ç›®ã§ã™",
        min: { value: 1, message: "1ä»¥ä¸Šã®æ•°å€¤ã§ã™" },
        valueAsNumber: true,
      },
    }

    export const SampleForm = () => {
      const method = useDefaultForm<Person>({ defaultValues })
      const { handleSubmit } = method

      const onSubmit: SubmitHandler<Person> = (data) => {
        console.table(data)
      }
      return (
        <form onSubmit={handleSubmit(onSubmit)}>
          <Row>
            <Column>
              <Div>Name</Div>
              <MyInput<Person, string>
                method={method}
                target={"name"}
                constrain={constrain["name"]}
              />
            </Column>
          </Row>
          <Row>
            <Column>
              <Div>Age</Div>
              <MyInput<Person, number>
                method={method}
                target={"age"}
                constrain={constrain["age"]}
              />
            </Column>
          </Row>
          <Row>
            <Submit value={"OK"} />
          </Row>
        </form>
      )
    }

- KEY: pk.rhf.generic.sample.a.parent
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ A:è¦ª
  BODY: |
    import { useForm } from "react-hook-form"
    import { Button, Flex } from "@chakra-ui/react"
    import { PersonA, SectionPersonA } from "./SectionPersonA"
    import { SectionAddress, type Address } from "./SectionAddress"

    const defaultValues: PersonA & Address = {
      name: "1-john A",
      age: "1-202 A",
      city: "1-tokyo A",
      zip: "1-895 A",
    }

    export const SetAA = () => {
      const methods = useForm<PersonA & Address>({ defaultValues, mode: "onBlur" })

      const handleLog = () => {
        console.log(methods.getValues())
      }

      return (
        <Flex flexFlow={"column"} justifyContent={"flex-start"}>
          <SectionPersonA methods={methods} />
          <SectionAddress methods={methods} />
          <Button onClick={handleLog}>Log</Button>
        </Flex>
      )
    }

- KEY: pk.rhf.generic.sample.a.child
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ A:å­
  BODY: |
    â–  Organism Component A

    export type PersonA = {
      name: string
      age: string
    }

    type Props<T extends PersonA> = {
      methods: UseFormReturn<T>
    }

    //ãªã‚“ã§ã‚‚å—ã‘ã„ã‚‰ã‚Œã‚‹ã®ã§å‹ã‚’Enumã§è‡ªå¾‹åˆ¶å¾¡ã™ã‚‹å¿…è¦ã‚ã‚Š
    const items: (keyof PersonA)[] = ["name", "age"] as const
    const eItems = makeEnum(items)

    export const SectionPersonA = <T extends PersonA>({ methods }: Props<T>) => {
      const watchName = useWatch({
        control: methods.control,
        name: "name" as Path<T>,
      })

      useEffect(() => {
        methods.setValue("age" as Path<T>, watchName)
      }, [watchName])

      return (
        <Flex>
          // keyName ã§å‹ä¸Šæ›¸ãï¼ˆãŸã ã—ï¼‰
          <MyInput methods={methods} keyName={eItems.name as Path<T>} />
          <MyInput methods={methods} keyName={eItems.age as Path<T>} />
        </Flex>
      )
    }

    â–  SectionAddress çœç•¥

- KEY: pk.rhf.generic.sample.b.parent
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ B:è¦ª
  BODY: |
    const defaultValues: PersonA & Address = {
      name: "2-john A",
      age: "2-202 A",
      city: "2-tokyo A",
      zip: "2-895 A",
    }

    export const SetBA = () => {
      const methods = useForm<PersonA & Address>({ defaultValues, mode: "onBlur" })

      const handleLog = () => {
        console.log(methods.getValues())
      }

      return (
        <Flex flexFlow={"column"} justifyContent={"flex-start"}>
          // methodsã®å‹ã‚’ä¸Šæ›¸ã
          <SectionPersonA methods={methods as unknown as UseFormReturn<PersonA>} />
          <SectionAddress methods={methods as unknown as UseFormReturn<Address>} />
          <Button onClick={handleLog}>Log</Button>
        </Flex>
      )
    }

- KEY: pk.rhf.generic.sample.b.child
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯(Organism) B:å­
  BODY: |
    export type PersonA = {
      name: string
      age: string
    }

    type Props = {
      methods: UseFormReturn<PersonA>
    }

    export const SectionPersonA = ({ methods }: Props) => {
      const watchName = useWatch({
        control: methods.control,
        name: "name" as Path<PersonA>,
      })

      useEffect(() => {
        methods.setValue("age" as Path<PersonA>, watchName)
      }, [watchName])

      return (
        <Flex>
          <MyInput methods={methods} keyName={"name"} />
          <MyInput methods={methods} keyName={"age"} />
        </Flex>
      )
    }
    â–  SectionAddress çœç•¥

#-------------------------------
# ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
#-------------------------------

- KEY: pk.rhf.validation.title
  CATEGORY: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

- KEY: pk.rhf.validation
  EXPLAIN: æ¨™æº–ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  BODY: |
    required            // boolean      å¿…é ˆé …ç›®
    disabled            // boolean      ä¸è¦é …ç›®

    â–  ä¸€èˆ¬
    min                 // number       { min: 1, message: "1ä»¥ä¸Šã®æ•°å€¤" }
    max                 // number 
    minLength           // string       { minLength: 4, message: "4æ–‡å­—ä»¥ä¸Šå¿…é ˆ" }
    maxLength           // string 
    pattern             // æ­£è¦è¡¨ç¾      { pattern: /^[a-zA-Z0-9]+$/, message: 'åŠè§’è‹±æ•°å­—ã®ã¿' }

    â–  å‹å¤‰æ›(validationå‰ã«å‹•ä½œ)
    valueAsNumber       // boolean      å‹å¤‰æ›:æ•°å€¤
    valueAsDate         // boolean      å‹å¤‰æ›:æ—¥ä»˜
    setValueAs          // Function     { setValueAs: v => parseInt(v) }

    â–  pattern           // Function
    {...register("test", { pattern: /[A-Za-z]{3}/, message: 'åŠè§’è‹±æ•°å­—ã®ã¿' })}

    â–  validate(å˜æ•°)    // Function
    {...register("test", { validate: (value, formValues) => value === '1' })}

    â–  validate(è¤‡æ•°)    // { Key1:Function, Key2:Function,... }
    {...register("test1", {
      validate: {
        positive:       v => parseInt(v) > 0,
        lessThanTen:    v => parseInt(v) < 10,
        validateNumber: (_, values) => !!(values.number1 + values.number2), 
        checkUrl:       async () => await fetch(),
      }
    })}

#-------------------------------
# Data æ§‹é€ 
#-------------------------------

- KEY: pk.rhf.data.structure.title
  CATEGORY: ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

- KEY: pk.rhf.data.structure
  EXPLAIN: å¤šå±¤ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
  BODY: |
    â–  data ã¨ error data ã®æ§‹é€ ãŒé•ã†ã€‚å–å¾—æ™‚ã®æ·»å­—ã®å‹ã«æ³¨æ„

    type Section = "section1" | "section2";
    type Attrs = "name" | "age";

    const defaultData = {
      name: "Smith",
      age: 1,
    };
    type DefaultDataHidden = typeof defaultData;

    type Data = Partial<Record<`${Section}.${Attrs}`, string>>;
    const data: Data = {
      "section1.name": "John",
      "section1.age": "Tokyo",
      "section2.name": "Jim",
      "section2.age": "LA",
    };

    type ErrorDataHidden = Record<
      Section,
      Record<keyof DefaultDataHidden, { message: string }>
    >;

    const errorData: ErrorDataHidden = {
      section1: {
        name: { message: "Must be String" },
        age: { message: "Must be Number" },
      },
      section2: {
        name: { message: "Must be String" },
        age: { message: "Must be Number" },
      },
    };

    //-----------------------------------------------
    // Data
    //-----------------------------------------------
    {
      type DefaultData = typeof defaultData;
      type DefaultDataKeys = keyof DefaultData;

      type DataKeys = keyof typeof data;
      const section = ["section1", "section2"];

      section.forEach((section) => {
        const keyName = "name" as DefaultDataKeys;     //æ·»å­—ã®å‹
        const res1 = data?.[`${section}.${keyName}` as DataKeys] || "Unknown";
        console.log(keyName, res1);
      });
    }

    //-----------------------------------------------
    // Error
    //-----------------------------------------------
    {
      type DefaultData = typeof defaultData;
      const dataKeys = Object.keys(data);

      dataKeys.forEach((key) => {
        const [section, attr] = key.split(".");
        const [section, attr] = key.split(".") as [Section, keyof DefaultData] ;   //æ·»å­—ã®å‹
        const res1 = errorData?.[section]?.[attr]?.message || "Unknown";
        console.log(section, attr, res1);
      });
    }
