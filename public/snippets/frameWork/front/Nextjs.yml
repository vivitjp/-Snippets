---
#-------------------------------
# Nextjs
#-------------------------------

- KEY: nextjs.overview
  EXPLAIN: Nextjs æ¦‚èª¬
  BODY: |
    Next.jsã‚’ä½¿ã†ã¹ã5ã¤ã®ç†ç”± + å®Ÿè£…Tips
    https://qiita.com/Yuki_Oshima/items/5c0dfd8f7af8fb76af8f

    â–  SSR/SSG
    â–  ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    â–  é–‹ç™ºã‚µãƒ¼ãƒã®éƒ¨åˆ†çš„ãªé«˜é€Ÿãƒªãƒ­ãƒ¼ãƒ‰(Fast Refresh)
    â–  ç”»åƒæœ€é©åŒ–
    â–  ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°

- KEY: nextjs.install
  EXPLAIN: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  BODY: |
    â–  ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    npx create-next-app@latest          // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã® npm/yarn ä½¿ç”¨ã‚’æ±ºå®š
    yarn create next-app

    Need to install the following packages:
    create-next-app@14.2.5
    Ok to proceed? (y) y

    âˆš What is your project named? ... next13
    âˆš Would you like to use TypeScript? ... No / Yes
    âˆš Would you like to use ESLint? ... No / Yes
    âˆš Would you like to use Tailwind CSS? ... No / Yes
    âˆš Would you like to use `src/` directory? ... No / Yes
    âˆš Would you like to use App Router? (recommended) ... No / Yes  <---- * app or src
    âˆš Would you like to customize the default import alias (@/*)? ... No / Yes
    Creating a new Next.js app in B:\@Next\next_13\next13.

    Using npm.
    Initializing project with template: app-tw 

    Installing dependencies:
    - react    
    - react-dom
    - next

    Installing devDependencies:
    - typescript
    - @types/node
    - @types/react
    - @types/react-dom
    - postcss
    - tailwindcss
    - eslint
    - eslint-config-next

    Success! Created next13 at B:\@Next\next_13\next13

    â–  é–‹ç™ºç’°å¢ƒã®ç«‹ã¡ä¸Šã’
    npm run dev
    yarn dev

    â–  ãƒ–ãƒ©ã‚¦ã‚¶ç¢ºèª
    http://localhost:3000

- KEY: nextjs.install.old
  EXPLAIN: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(å¤ãƒãƒ¼ã‚¸ãƒ§ãƒ³)
  BODY: |
    $ npx create-next-app@13 --use-npm

    npmã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
    https://www.npmjs.com/package/create-next-app?activeTab=versions

    15.0.0-rc.1       rc
    15.0.2-canary.2   canary
    15.0.1            latest
    13.5.7            next-13 <-- npx create-next-app@13 --use-npm
    14.1.1            next-12-3-2

- KEY: nextjs.package.json
  EXPLAIN: package.json
  BODY: |
    {
      "name": "next13",
      "version": "0.1.0",
      "private": true,
      "scripts": {
        "dev": "next dev",
        "build": "next build",
        "start": "next start",
        "lint": "next lint"
      },
      "dependencies": {
        "next": "14.2.5",
        "react": "^18",
        "react-dom": "^18"
      },
      "devDependencies": {
        "@types/node": "^20",
        "@types/react": "^18",
        "@types/react-dom": "^18",
        "eslint": "^8",
        "eslint-config-next": "14.2.5",
        "postcss": "^8",
        "tailwindcss": "^3.4.1",
        "typescript": "^5"
      }
    }

- KEY: nextjs.directory
  EXPLAIN: åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«
  BODY: |
    ./
      app/                              // Top
        dir1/                           // URL sub dir
          page.tsx                      // å„ sub dir ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒšãƒ¼ã‚¸
        globals.css                     // å…±é€šCSS
        layout.tsx                      // Root HTML
        not-found.tsx                   // 404 Error ãƒšãƒ¼ã‚¸
        page.tsx                        // Root ãƒšãƒ¼ã‚¸
      components/
        atoms/
      utilities/
      hooks/
      node_modules/                     // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
      public/                           // output
      next-env.d.ts
      next.config.mjs
      ...ãã®ä»–ã‚³ãƒ³ãƒ•ã‚£ã‚°

- KEY: nextjs.root.env
  EXPLAIN: |
    Root: .env
  BODY: |
    â–  ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰
      [.env]
      ENDPOINT='https://example.com/'

      [page.tsx]
      const endPoint = process.env.ENDPOINT || '';

    â–  ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰

      * AWSã§ã®èªè¨¼æ™‚ã«ã¯æ³¨æ„: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨

      [.env]
      NEXT_PUBLIC_ENDPOINT='https://example.com/'

      [page.tsx]
      const endPoint = process.env.NEXT_PUBLIC_ENDPOINT || '';

- KEY: nextjs.app.router.v13
  EXPLAIN: AppRouter(v13~) æ§‹æˆ
  BODY: |
    â–  13ä»¥å‰
    ./
      src/                              // Root
        â””â”€â”€ pages/
            â”œâ”€â”€ index.tsx               // root: / 
            â””â”€â”€ hello/
                â”œâ”€â”€ page.tsx            // /hello?id=123
                â””â”€â”€ [id].tsx            // /hello/123

    â–  13ä»¥å¾Œ(appã®å ´åˆ)
    ./
      app/                              // åç§°æŒ‡å®š: Root
        â”œâ”€â”€ page.tsx                    // åç§°æŒ‡å®š: export default ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        â”œâ”€â”€ layout.tsx                  // åç§°æŒ‡å®š: Root Layout(HTML/BODY)
        â”œâ”€â”€ loading.tsx                 // åç§°æŒ‡å®š: Root Loading Component
        â”œâ”€â”€ template.tsx                // åç§°æŒ‡å®š: å…±é€šUIå®šç¾©(ãƒšãƒ¼ã‚¸é·ç§»ã§æ¯å›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°)
        â”œâ”€â”€ global-error.tsx            // åç§°æŒ‡å®š: Root Error Page
        â”œâ”€â”€ hello/                      // PATH: /hello
        â”‚   â”œâ”€â”€ error.tsx               // åç§°æŒ‡å®š: /hello Level Error Page
        â”‚   â”œâ”€â”€ layout.tsx              // åç§°æŒ‡å®š: /hello Level Layout(Section)
        â”‚   â”œâ”€â”€ loading.tsx             // åç§°æŒ‡å®š: /Hello Loading
        â”‚   â”œâ”€â”€ page.tsx                // åç§°æŒ‡å®š(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚¡ã‚¤ãƒ«)
        â”‚   â”œâ”€â”€ template.tsx            // åç§°æŒ‡å®š: å…±é€šUIå®šç¾©
        â”‚   â””â”€â”€ [id]/                   // å¼•æ•°: /hello/123
        â”‚       â”œâ”€â”€ page.tsx
        â”‚       â””â”€â”€ [name]/             // å¼•æ•°: /hello/123/john
        â”‚           â””â”€â”€ page.tsx
        â”œâ”€â”€ address/                    // PATH: /address
        â”‚   â”œâ”€â”€ page.tsx                // åç§°æŒ‡å®š
        â”‚   â””â”€â”€ _components             // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆpath(ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°éå¯¾è±¡)
        â”‚       â””â”€â”€ partsA.tsx
        â”œâ”€â”€ patha/                      // PATH: /patha
        â”‚   â””â”€â”€ [...ids].tsx            // å¼•æ•°(MUST)
        â”œâ”€â”€ pathb/                      // PATH: /pathb
        â”‚   â””â”€â”€ [[...ids]].tsx          // å¼•æ•°(OPTIONAL)
        â”œâ”€â”€ (myGroup)/                  // ã‚°ãƒ«ãƒ¼ãƒ—åŒ–: Routing path ã‹ã‚‰é™¤å¤–
        â”‚   â”œâ”€â”€ group1/                 // PATH: /group1
        â”‚   â”‚   â””â”€â”€ page.tsx
        â”‚   â””â”€â”€ group2/                 // PATH: /group2
        â”‚       â””â”€â”€ page.tsx
        â”œâ”€â”€ api/                        // åç§°ä»»æ„
        â”‚   â””â”€â”€ name/                   // API PATH /api/name
        â”‚       â””â”€â”€ route.tsx           // åç§°æŒ‡å®š: API route file(GET,POST,...)
        â”œâ”€â”€ segment/                    // åç§°ä»»æ„
        â”‚   â”œâ”€â”€ @seg/                   // Parallel Routes Slot
        â”‚   â”‚   â””â”€â”€ page.tsx
        â”‚   â””â”€â”€ layout.tsx              // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å¼•æ•°ã¨ã—ã¦ @seg å‘¼ã³å‡ºã—(å ´æ‰€æ³¨æ„)
        â”œâ”€â”€ _components/                // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ(ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ)
        â”‚   â”œâ”€â”€ atom/
        â”‚   â”œâ”€â”€ molecules/
        â”‚   â””â”€â”€ organism/

- KEY: nextjs.app.router.query
  EXPLAIN: AppRouter Query
  BODY: |
    â–  DIR: ./app/hello/page.tsx
    â–  URL: http://localhost:3000/hello?id=123
    â–  ã‚³ãƒ¼ãƒ‰
      "use client"                      // useSearchParams ã«å¿…é ˆ

      import { useSearchParams } from "next/navigation"

      export default function XXX() {   // é–¢æ•°åã¯ä»»æ„
        const searchParams = useSearchParams()
        const id = searchParams.get("id")

        return (
          <div> Hello TOP {id} </div>
        )
      }

    â–  æ³¨: "use client"
    ãƒ»useSearchParams ãªã©ã® hooks ã¯ client å´ã§ã®å®Ÿè£…ãªã®ã§ "use client" å¿…é ˆ
    ãƒ»ãªã„å ´åˆã® Error

        Ã— You're importing a component that needs useSearchParams.
        It only works in a Client Component but none of its parents are 
        marked with "use client", so they're Server Components by default.

- KEY: nextjs.app.router.dynamic.single
  EXPLAIN: AppRouter å‹•çš„Routing(å¼•æ•°-å˜æ•°)
  BODY: |
    â–  DIR: ./app/hello/[id]/page.tsx    // 13ä»¥å‰ã¨ã¯å½¢å¼ç•°ãªã‚‹
    â–  URL: http://localhost:3000/hello/123

    â–  ã‚³ãƒ¼ãƒ‰
      type Props = {
        params: { id: string }          // paramsã¯æ—¢å®šå±æ€§
      }

      export default function Hello({ params }: Props) {
        const { id } = params

        return (
          <div> Hello {id} </div>
        )
      }

- KEY: nextjs.app.router.dynamic.multiple
  EXPLAIN: AppRouter å‹•çš„Routing(å¼•æ•°-è¤‡æ•°)
  BODY: |
    â–  DIR: ./app/hello/[id]/[name]/page.tsx
    â–  URL: http://localhost:3000/hello/123/john

    â–  ã‚³ãƒ¼ãƒ‰
      type Props = {
        params: { id: string; name: string }  // paramsã¯æ—¢å®šå±æ€§
      }

      export default function Hello({ params }: Props) {
        const { id, name } = params

        return (
          <div> Hello {id} {name} </div>
        )
      }

- KEY: nextjs.app.router.dynamic.array
  EXPLAIN: AppRouter å‹•çš„Routing(å¼•æ•°-é…åˆ—) å¿…é ˆ
  BODY: |
    â–  DIR: ./app/patha/[...ids]/page.tsx            // ä¸€é‡[...å¼•æ•°]
    â–  URL: http://localhost:3000/patha/abc/123/efg  // OK: è¤‡æ•°ã®é€£ç¶šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ã‚¿
    â–  URL: http://localhost:3000/patha/             // NG: NOãƒ‘ãƒ©ãƒ¡ã‚¿

    â–  ã‚³ãƒ¼ãƒ‰
      type Props = {
        params: { ids: string[] }     // paramsã¯æ—¢å®šå±æ€§ & å¼•æ•°(ä¾‹:ids) å¿…é ˆ
      }
      export default function PathA({ params }: Props) {
        return (
          <div> PATH-A: {params.ids.join("-")} </div>
        )
      }

- KEY: nextjs.app.router.dynamic.array
  EXPLAIN: AppRouter å‹•çš„Routing(å¼•æ•°-é…åˆ—) Optional
  BODY: |
    â–  DIR: ./app/pathb/[[...ids]]/page.tsx          // äºŒé‡[[...å¼•æ•°]]
    â–  URL: http://localhost:3000/pathb/abc/123/efg  // OK: è¤‡æ•°ã®é€£ç¶šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ã‚¿
    â–  URL: http://localhost:3000/pathb/             // OK: NOãƒ‘ãƒ©ãƒ¡ã‚¿

    â–  ã‚³ãƒ¼ãƒ‰
      type Props = {
        params: { ids?: string[] }        // paramsã¯æ—¢å®šå±æ€§ & å¼•æ•°(ä¾‹:ids) Optional
      }
      export default function PathB({ params }: Props) {
        return (
          <div> PATH-B: {params.ids?.join("-") || "unknown"} </div>
        )
      }

- KEY: nextjs.layout.root
  EXPLAIN: |
    FILE: layout.tsx(root HTML)
  BODY: |
    â–  Root Layout(HTML: Server Component By default)

      import type { Metadata } from "next";
      import { Inter } from "next/font/google";
      import "./globals.css";

      const inter = Inter({ subsets: ["latin"] });

      export const metadata: Metadata = {
        title: "Next Sample 13",
        description: "Generated by create next app",
      };

      export default function RootLayout({ children }: Readonly<{
        children: React.ReactNode;
      }>) {
        return (
          <html lang="ja">                // Root Level ã«ã¯ HTML & Body
            <body className={inter.className}>
              <div>Root Layout</div>
              <div>{children}</div>
            </body>
          </html>
        );
      }

- KEY: nextjs.layout.pages
  EXPLAIN: |
    FILE: layout.tsx(sub paths)
  BODY: |
    â–  å„Page ã® nested Layout(Server Component By default)
    pages.tsx ã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€å†…ã«ã‚ã‚Šã€pagesã‚’ wrap ã™ã‚‹

      export default function DashboardLayout({
        children,
      }: {
        children: React.ReactNode
      }) {
        return <section>{children}</section>
      }

- KEY: nextjs.layout.parallel.routes
  EXPLAIN: |
    Layout: Parallel Routes
  BODY: |
    â–  Tree
      sub/                              // Sub path
        â”œâ”€â”€ layout.tsx                  // sub Layout
        â””â”€â”€ @segA                       // segment dir
            â”” page.tsx                  // segment page

    â–  [sub/@segA/page.tsx]
      export default function page() {
        return <div>Segment A</div>
      }

    â–  [sub/layout.tsx]
      export default function RootLayout({
        children,
        seg1,                           // segment è‡ªå‹•å–ã‚Šè¾¼ã¿
      }: Readonly<{
        children: React.ReactNode
        seg1: React.ReactNode
      }>) {
        return (
          <body className={inter.className}>
            {seg1}
            <div>{children}</div>
          </body>
        )
      }

- KEY: nextjs.css.global
  EXPLAIN: |
    CSS: global(Tailwind Sample)
  BODY: |
    @tailwind base;
    @tailwind components;
    @tailwind utilities;

    :root {
      --foreground-rgb: 0, 0, 0;
      --background-start-rgb: 214, 219, 220;
      --background-end-rgb: 255, 255, 255;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --foreground-rgb: 255, 255, 255;
        --background-start-rgb: 0, 0, 0;
        --background-end-rgb: 0, 0, 0;
      }
    }

    body {
      color: rgb(var(--foreground-rgb));
      background: linear-gradient(
        to bottom,
        transparent,
        rgb(var(--background-end-rgb))
      )
      rgb(var(--background-start-rgb));
    }

    @layer utilities {
      .text-balance {
        text-wrap: balance;
      }
    }

- KEY: nextjs.not.found
  EXPLAIN: |
    Not Found
  BODY: |
    â–  DIR: ./app/not-found.tsx          // Server Compo

    â–  ã‚³ãƒ¼ãƒ‰(åŒæœŸ)
      import Link from 'next/link';

      export default function NotFound() {
        return (
          <div>
            <h2>Not Found</h2>
            <Link href='/'>Return Home</Link>
          </div>
        );
      }

    â–  ã‚³ãƒ¼ãƒ‰(éåŒæœŸ)
      import Link from 'next/link'
      import { headers } from 'next/headers'
      
      export default async function NotFound() {
        const headersList = headers()
        const domain = headersList.get('host')
        const data = await getSiteData(domain)

        return (
          <div>
            <h2>Not Found: {data.name}</h2>
            <p>View <Link href="/blog">all posts</Link></p>
          </div>
        )
      }

- KEY: nextjs.loading
  EXPLAIN: |
    Loading Component(è‡ªå‹•è¡¨ç¤º)
  BODY: |
    â–  Loading(Root & Local)

    åŒãƒ¬ãƒ™ãƒ«PATHã®pageãŒèª­ã¿è¾¼ã‚€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¡¨ç¤ºã«é…å»¶ãŒç™ºç”Ÿ
    è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã¦è¡¨ç¤º

    [/app/loading.tsx]                  // Root Level
    "use client"
    import { Circles } from "react-loader-spinner"

    export default function Loading() {
      return (
        <Circles
          height="100"
          width="100"
          color="#eee8aa"
          visible={true}
        />
      )
    }

- KEY: nextjs.error.root
  EXPLAIN: |
    ğŸ”º Error: Root
  BODY: |
    â–  Global Error(å„ªå…ˆ)

    â–  DIR: ./app/global-error.tsx       // Client Compo

- KEY: nextjs.error.pages
  EXPLAIN: |
    Error: å„Page
  BODY: |
    â–  DIR: ./app/<SUB>/error.tsx        // å„/<SUB> ä»¥ä¸‹ã® Client Compo

    "use client"                      // Client Components
    import { useEffect } from "react"

    export default function Error({ error, reset }: {
      error: Error & { digest?: string }
      reset: () => void
    }) {
      useEffect(() => {
        console.error(error)
      }, [error])

      return (
        <div>
          <h2>Local Error</h2>
          <button onClick={ ()=>reset() }>  // ReRender
            Try again
          </button>
        </div>
      )
    }

- KEY: nextjs.api
  EXPLAIN: API Route
  BODY: |
    â–  route.tsx                         å¿…é ˆ API ãƒ•ã‚¡ã‚¤ãƒ«å
    ./
      app/
        â”œâ”€â”€ layout.tsx
        â”œâ”€â”€ sub
        â”‚   â””â”€â”€ api/                    // åç§°ä»»æ„
        â”‚       â””â”€â”€ route.tsx           // GET /sub/api/
        â””â”€â”€ api/                        // åç§°ä»»æ„
            â””â”€â”€ address/
                â””â”€â”€ route.tsx           // GET /api/address/

    â–  [route.tsx]                       // * index.tsx ã¯ç„¡åŠ¹
    export async function GET() {
      const URL = "https://vivit-mock-company.vercel.app/10"
      const res = await fetch(URL, {
        headers: {
          "Content-Type": "application/json",
        },
      })
      const data = await res.json()
      return Response.json({ data })
    }

- KEY: nextjs.link
  EXPLAIN: Link(next/link)
  BODY: |
    â–  ãƒªãƒ³ã‚¯
    import Link from 'next/link';

    export default function Navbar() {  // Server Component
      return (
        <nav>
          <Link href="/about">About</Link>
        </nav>
      );
    }

    â–  å‡ºåŠ›(#hash link ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«)
    <Link href="/dashboard#settings">Settings</Link>
    ç”Ÿæˆ: <a href="/dashboard#settings">Settings</a>

    â–  ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«Off
    <Link href="/dashboard" scroll={false}> Dashboard </Link>

    â–  typedRoutes(v13~)                 // Routeã®å‹è£œå®Œ
    [next.config.mjs]
    /** @type {import('next').NextConfig} */
    const nextConfig = {
      experimental: {
        typedRoutes: true,
      },
    };
    export default nextConfig;

- KEY: nextjs.link.usePathname
  EXPLAIN: Link(next/link) + usePathname
  BODY: |
    â–  ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®pathå–å¾—
    'use client'                        // â˜…Client Component

    import { usePathname } from 'next/navigation'
    import Link from 'next/link'

    export function Links() {
      const pathname = usePathname()

      return (
        <nav>
          <Link
            className={`link ${pathname === "/" ? "active" : ""}`}
            href="/"
          >
            Home/
          </Link>
        </nav>
      )
    }

- KEY: nextjs.useRouter
  EXPLAIN: |
    useRouter(next/navigation: v13~)
  BODY: |
    â–  DIR: ./app/login/page.tsx
    â–  URL: http://localhost:3000/login

    â–  ã‚³ãƒ¼ãƒ‰
    "use client"                        // Hooks ã«ã¯å¿…é ˆ

    import { useRouter } from "next/navigation" // æ–°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
    // import { useRouter } from "next/router"  â˜…DEPRECATED

    export default function Login() {
      const router = useRouter()

      const id = 456
      const login = () => {
        router.push(`/hello/${id}`)                  //å¼•æ•°ä»˜ãã®é·ç§»
        router.push('/dashboard', { scroll: false }) //Scroll Off
      }

      return (
        <div>
          <button onClick={login}>Log In</button>
        </div>
      )
    }

- KEY: nextjs.redirect
  EXPLAIN: redirect
  BODY: |
    â–  ã‚³ãƒ¼ãƒ‰
    [app/person/[id]/page.tsx]
    import { redirect } from 'next/navigation'

    export default async function Profile({ params }: { params: { id: string } }) {
      const personId = await fetchPersonId(params.id)
      if (!personId) redirect('/login')
      ...
    }

    â–  æ³¨æ„
    ãƒ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 307(ä¸€æ™‚ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ)
    ãƒ»ã‚µãƒ¼ãƒãƒ¼ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§: 303(See Other)
        POSTã®çµæœã¨ã—ã¦æˆåŠŸãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    ãƒ»try/catch ãƒ–ãƒ­ãƒƒã‚¯ã®å¤–å´ã§å‘¼ã³å‡ºã™ã“ã¨
    ãƒ»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹ä¸­ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚³ãƒ¼ãƒ«å¯èƒ½
    ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ã¯ã‚³ãƒ¼ãƒ«ä¸å¯: ä»£ã‚ã‚Šã« useRouter ãƒ•ãƒƒã‚¯ä½¿ç”¨å¯
    ãƒ»çµ¶å¯¾ URL(å¤–éƒ¨ãƒªãƒ³ã‚¯) ã‚‚OK
    ãƒ»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° ãƒ—ãƒ­ã‚»ã‚¹ã®å‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ: next.config.js ã¾ãŸã¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ä½¿ç”¨

- KEY: nextjs.history.pushState
  EXPLAIN: window.history.pushState
  BODY: |
    â–  pushState
    ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã›ãšã«ãƒ–ãƒ©ã‚¦ã‚¶ã®å±¥æ­´ã‚¹ã‚¿ãƒƒã‚¯ã‚’æ›´æ–°ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

    â–  å®šç¾©
    pushState(state, unused)
    pushState(state, unused, url)

      state: firefoxã«ã¯16MBã®åˆ¶é™
      ç¬¬2å¼•æ•°ã¯æœªä½¿ç”¨(æ­´å²çš„æ„ç¾©)
      url: ç›¸å¯¾/çµ¶å¯¾PATH

    â–  è€ƒå¯Ÿ
    pushState() ã®å‘¼ã³å‡ºã—ã¯ window.location = "#foo" ã¨ã»ã¼åŒã˜

    ç¾åœ¨ã® URL ã¨åŒä¸€ã‚ªãƒªã‚¸ãƒ³ã«ã‚ã‚‹ã€ã‚ã‚‰ã‚†ã‚‹ URL ã«ã™ã‚‹ã“ã¨ãŒå¯èƒ½
    (æ¯”è¼ƒ) window.location: ãƒãƒƒã‚·ãƒ¥ã®ã¿ã‚’å¤‰æ›´ã—ãŸã®ã§ã‚ã‚Œã°åŒã˜æ–‡æ›¸ã«ã¨ã©ã¾ã‚‹

    URL å¤‰æ›´ã¯éå¿…é ˆ
    (æ¯”è¼ƒ) window.location = "#foo"; ç¾ãƒãƒƒã‚·ãƒ¥ãŒ #foo ã§ãªã„å ´åˆã®ã¿æ–°è¦ã®å±¥æ­´é …ç›®ä½œæˆ

    å±¥æ­´é …ç›®ã«ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿(state)é–¢é€£ã¥ã‘å¯èƒ½
    (æ¯”è¼ƒ) ãƒãƒƒã‚·ãƒ¥ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ: state ã‚’çŸ­ã„æ–‡å­—åˆ—ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ã‚ã‚Š


    â–  ã‚³ãƒ¼ãƒ‰
    const state = { page_id: 1, user_id: 5 };
    const url = "hello.html";
    history.pushState(state, "", [url]);

    â–  ã‚³ãƒ¼ãƒ‰(ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ã‚¿ã®å¤‰æ›´)
    const url = new URL(location);
    url.searchParams.set("foo", "bar");
    history.pushState({}, "", url);

    â–  ã‚³ãƒ¼ãƒ‰
    'use client'
    import { useSearchParams } from 'next/navigation'

    export default function SortProducts() {
      const searchParams = useSearchParams()

      function updateSorting(sortOrder: string) {
        const params = new URLSearchParams(searchParams.toString())
        params.set('sort', sortOrder)
        window.history.pushState(null, '', `?${params.toString()}`)
      }

      return (
        <>
          <button onClick={() => updateSorting('asc')}>Sort æ­£é †</button>
          <button onClick={() => updateSorting('desc')}>Sort é€†é †</button>
        </>
      )
    }

- KEY: nextjs.history.replaceState
  EXPLAIN: window.history.replaceState
  BODY: |
    â–  replaceState
    ãƒ–ãƒ©ã‚¦ã‚¶ã®å±¥æ­´ã‚¹ã‚¿ãƒƒã‚¯ä¸Šã®ç¾åœ¨ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ç½®ãæ›ãˆ
    å‰ã®çŠ¶æ…‹ã«æˆ»ã‚‹ã“ã¨ã¯ã§ããªã„

    â–  å®šç¾©
    replaceState(state, unused)
    replaceState(state, unused, url)

      state=null å¯
      ç¬¬2å¼•æ•°ã¯æœªä½¿ç”¨(æ­´å²çš„æ„ç¾©)
      æ–°ã—ã„ URL ã¯ç¾åœ¨ã® URL ã¨åŒã˜ã‚ªãƒªã‚¸ãƒ³ => ã‚ªãƒªã‚¸ãƒ³é•ã†ã¨ä¾‹å¤–ç™ºç”Ÿ

    â–  ã‚³ãƒ¼ãƒ‰
    const stateObj = { foo: "bar" };
    history.pushState(stateObj, "", "bar.html");

    â–  ã‚³ãƒ¼ãƒ‰
    'use client'

    import { usePathname } from 'next/navigation'

    export function LocaleSwitcher() {
      const pathname = usePathname()

      function switchLocale(locale: string) {
        const newPath = `/${locale}${pathname}`
        window.history.replaceState(null, '', newPath)
      }

      return (
        <>
          <button onClick={() => switchLocale('en')}>English</button>
          <button onClick={() => switchLocale('fr')}>French</button>
        </>
      )
    }

- KEY: nextjs.image
  EXPLAIN: Image
  BODY: |
    â–  ç”»åƒãƒ•ã‚©ãƒ«ãƒ€

    /app/...
    /public/

    â–  Image ã‚¿ã‚°ä½¿ç”¨
      width, height, alt ãªã©å¿…é ˆé …ç›®ã‚ã‚Š

    import Image from "next/image"
    export default function Images() {
      return (
        <Image src="/image/mount.jpg" width={500} height={500} alt="image" />
      )
    }

    â–  é™çš„Import(æ³¨æ„: pathãŒ public ã‹ã‚‰é–‹å§‹)

    import mt from "/public/image/mt1.jpg"
    export default function Images() {
      return (
        <Image src={mt} alt="image" />
      )
    }

- KEY: nextjs.style
  EXPLAIN: Next ã® Style æ¯”è¼ƒ
  BODY: |
    â–  ç¨®é¡
    StyledComponent
    CSS Modules
    Styled JSX
    Sass/SCSS
    Tailwind CSS

    â–  StyledComponent

      import styled from 'styled-components';

      const Title = styled.h1`
        color: green;
      `;

      function Component() {
        return <Title>Hello, World!</Title>;
      }

      export default Component;

    â–  CSS Modules

      ã€styles/Button.module.cssã€‘
      .error {
        color: white;
        background-color: red;
      }

      ã€components/Button.jsã€‘
      import styles from './Button.module.css'

      export function Button() {
        return (
          <button className={styles.error}>
            Delete
          </button>
        )
      }

    â–  Styled JSX

      function Button() {
        return (
          <>
            <button>Click me</button>
            <style jsx>{`
              button {
                background-color: blue;
                color: white;
              }
            `}</style>
          </>
        )
      }

    â–  Sass/SCSS

      ã€styles/Button.module.scssã€‘
      $primary-color: blue;

      .button {
        background-color: $primary-color;
        color: white;
        
        &:hover {
          background-color: darken($primary-color, 10%);
        }
      }

      ã€components/Button.jsã€‘
      import styles from './Button.module.scss'

      export function Button() {
        return <button className={styles.button}>Click me</button>
      }

    â–  Tailwind CSS

      function Button() {
        return (
          <button className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Click me
          </button>
        )
      }
