---
#-------------------------------
# Lint
#-------------------------------

- ENTRY:
  EXPLAIN: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« & init
  BODY: |
    â–  ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    npm i -D eslint
    yarn add eslint --dev

    â–  è¨­å®š
    yarn run eslint --init

    â–  VScode
    ESLint ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¿½åŠ 

#-------------------------------
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
#-------------------------------
- ENTRY:
  EXPLAIN: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
  BODY: |
    â–  eslint(JS)
    eslint ğŸ”µ                                     ~9.0.0
    eslint-config-prettier                        ~9.1.0
    @eslint/js ğŸ”µ                                 ^9.0.0
    @types/eslint__js ğŸ”µ

    â–  eslint(TS) + plugin
    typescript-eslint ğŸ”µ
    @typescript-eslint/eslint-plugin ğŸ”µ           ~7.5.0
    @typescript-eslint/parser ğŸ”µ                  ~7.5.0

    â–  eslint(React) + plugins
    eslint-plugin-react ğŸ”µ                        ~7.34.1
    eslint-config-react-app                       ~7.0.1
    eslint-plugin-react-hooks ğŸ”µ                  ~4.6.0
    eslint-plugin-jsx-a11y                        ~6.8.0
    eslint-plugin-react-refresh

    â–  plugins
    eslint-plugin-import                          ~2.29.0
    eslint-plugin-jest                            ~28.2.0
    eslint-plugin-jsdoc                           ~48.2.3
    eslint-plugin-jsonc                           ~2.15.0
    eslint-plugin-prettier                        ~5.1.3
    eslint-plugin-sort-keys-fix                   ~1.1.2
    eslint-plugin-spellcheck                      0.0.20
    eslint-plugin-testing-library                 ~6.2.0

    â–  å¿…è¦ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    globals ğŸ”µ                                    ^15.0.0
    @babel/eslint-parser                          ~7.24.1

#-------------------------------
# setting
#-------------------------------
- ENTRY:
  EXPLAIN: è¨­å®šã‚·ã‚¹ãƒ†ãƒ ç§»è¡Œ
  BODY: |
    â–  ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒ
    æ—§(<=8): .eslistrc.js
    æ–°(>=9): eslint.config.js

    ãƒ»è¨­å®šã‚·ã‚¹ãƒ†ãƒ  Flat Config
    ãƒ»v10 ã§ æ—§ .eslintrc.js ã¯å®Œå…¨å‰Šé™¤

    â–  å¤‰æ›´ç‚¹
    ãƒ»plugin, parser æ§‹æ–‡å¤‰æ›´
    ãƒ»extends å»ƒæ­¢
    ãƒ»glob pattern ã§å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ¯ã«è¨­å®šå¯èƒ½
    ãƒ».eslintignore ã§é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®šãŒä¸å¿…è¦
    ãƒ»overrides ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ä¸å¿…è¦

- ENTRY:
  EXPLAIN: åˆæœŸè¨­å®š(init)
  BODY: |
    â–  @eslint/config ã§è¨­å®š
    > npm init @eslint/config@latest

    Need to install the following packages:
    @eslint/create-config@1.1.4
    Ok to proceed? (y) y
    > snippets@0.0.0 npx
    > create-config
    âˆš How would you like to use ESLint?
    âˆš What type of modules does your project use? Â· esm
    âˆš Which framework does your project use? Â· react
    âˆš The React plugin doesn't officially support ESLint v9 yet. What would you like to 
    do? Â· 9.x
    âˆš Does your project use TypeScript? Â· typescript
    âˆš Where does your code run? Â· browser
    The config that you've selected requires the following dependencies:

    â–  ä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    eslint@9.x
    globals
    @eslint/js
    typescript-eslint
    eslint-plugin-react
    @eslint/compat

- ENTRY:
  EXPLAIN: v9 å‰ã®å¤è¨­å®š(.eslistrc.js)
  BODY: |
    ã€.eslistrc.jsã€‘

    module.exports = {
      "env": {
        "browser": true,                          // ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ
        "es2021": true,                           // ES2021ã«å¯¾å¿œ
        "node": true                              // Node.jså¯¾å¿œ
      },

      "extends": [                                // ESLintã®æ¨å¥¨è¨­å®šã‚’ä½¿ã†
        "eslint:recommended",
        "plugin:@typescript-eslint/recommended",  //å‹ãƒã‚§ãƒƒã‚¯
        "plugin:@typescript-eslint/recommended-requiring-type-checking",  //ã‚ˆã‚Šå³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯
        'plugin:react/recommended',
        'plugin:react/jsx-runtime',
        'plugin:react-hooks/recommended',
      ],

      // ALL 
      "extends": ["eslint:all", "plugin:react/all"]

      "parser": "@typescript-eslint/parser",
      "parserOptions": {
        project: './tsconfig.json',               // ç›´æŒ‡å®šã§OKã®å ´åˆã‚‚...
        # "ecmaVersion": 12,                      // 12 or latest
        # "sourceType": "module"
      },

      "plugins": [
        "@typescript-eslint"
        'react',
        'react-refresh',
      ],

      "rules": {
        "semi": ["error", "never"]                // []ã®ç¬¬1å¼•æ•°:ã€error/warn/offã€‘
                                                  // []ã®ç¬¬2å¼•æ•°: ruleå›ºæœ‰ã®Optionã‚’å®šç¾©
                                                  // semiã«ã¯"never"ã¨ã„ã†Optionã‚ã‚Š
        'newline-before-return': 'error',
        'no-console': 'warn',
        'no-var': 'error',
      }
    }

    //React
    "settings": {
      "react": {
        "createClass": "createReactClass",
        "pragma": "React",
        "fragment": "Fragment",
        "version": "detect",
        "flowVersion": "0.53"
      },
    }

    //ä»¥ä¸‹ Vite
    "plugins": [
      'react-refresh'
    ],
    "rules": {
      'react-refresh/only-export-components': 'warn',  // vite
    }

- ENTRY:
  EXPLAIN: v9 å¾Œã®æ–°è¨­å®š(eslint.config.js)
  BODY: |
    export default [
      // â–  å¯¾è±¡ & é™¤å¤–
      {
        files: ["**/*.{ts, tsx, js,jsx}"],           // å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« 
        ignores: ["**/dist/**", ".lintstagedrc.js"], // é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«
      },

      // â–  JavaScript
      pluginJs.configs.recommended,

      // â–  TypeScript
      // ...tseslint.configs.recommended,
      // ...tseslint.configs.strict,
      // ...tseslint.configs.stylistic,
      ...tseslint.configs.recommendedTypeChecked,

      // â–  languageOptions
      {
        languageOptions: {
          globals: {
            ...globals.browser, // FrontEnd
          },
          parser: typescriptEslintParser,
          parserOptions: {
            ecmaFeatures: {
              jsx: true,  // React JSX
            },
            project: true,
          },
        },
      },

      // â–  ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
      {
        plugins: {
          "@typescript-eslint": typescriptEslint,
        },
        rules: {
          ...typescriptEslint.configs.recommended.rules,
        }
      }

- ENTRY:
  EXPLAIN: å¯¾è±¡ã¨é™¤å¤–
  BODY: |
    {
      files: ["**/*.{ts, tsx, js,jsx}"],
      ignores: ["**/dist/**"],
    }

- ENTRY:
  EXPLAIN: TypeScriptãƒ‘ãƒ¼ã‚µãƒ¼
  BODY: |
    {
      languageOptions: {
        parser: typescriptEslintParser,
        parserOptions: {
          allowAutomaticSingleRunInference?: boolean;
          cacheLifetime?: {
            glob?: number | 'Infinity';
          };
          ecmaFeatures: {
            jsx: true,                            // ğŸ”µ Boolean
            globalReturn?: boolean;
          },
          ecmaVersion?: number | 'latest';
          emitDecoratorMetadata?: boolean;
          experimentalDecorators?: boolean;
          extraFileExtensions?: string[];
          jsDocParsingMode?: 'all' | 'none' | 'type-info';
          jsxFragmentName?: string | null;
          jsxPragma?: string | null;
          lib?: string[];
          programs?: import('typescript').Program[];
          project: true,                          // ğŸ”µ string|string[]|boolean|null;
                                                  // æœ€ã‚‚è¿‘ã„ tsconfig.json ã‚’æ¢ã™
          projectFolderIgnoreList?: string[];
          tsconfigRootDir?: string;
          warnOnUnsupportedTypeScriptVersion?: boolean;
          EXPERIMENTAL_useProjectService?: boolean;
        },
      }
    }

- ENTRY:
  EXPLAIN: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
  BODY: |
    {
      plugins: {
        "@typescript-eslint": typescriptEslint,
      },
      rules: {
        ...typescriptEslint.configs.recommended.rules, // ğŸ”µ
        ...typescriptEslint.configs.strict.rules,
        
        // ä»¥ä¸‹ã¯ç¾æ™‚ç‚¹ã§ã‚¨ãƒ©ãƒ¼(2024-06)
        [ERROR] ...typescriptEslint.configs["recommended-type-checked"].rules,
        [ERROR] ...typescriptEslint.configs["strict-type-checked"].rules,
        
        // ãƒ«ãƒ¼ãƒ«ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–ã‚’å€‹åˆ¥ã«è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
        "@typescript-eslint/no-unused-vars": "on/off",
        "@typescript-eslint/no-misused-promises": "on/off",
        "@typescript-eslint/no-floating-promises": "on/off",

        "@typescript-eslint/consistent-type-definitions": "on/off",
        //  Use an `interface` instead of a `type`
        
        "@typescript-eslint/consistent-indexed-object-style": "on/off",
        //  A record is preferred over an index signature
        
        "@typescript-eslint/no-extraneous-class": "on/off",
        //  Unexpected class with only static properties
        
        "@typescript-eslint/no-unused-vars": "on/off",
        //  'n' is defined but never used
      },
    },

- ENTRY:
  EXPLAIN: React è¨­å®š
  BODY: |
    // ç¾çŠ¶ã€pluginReactConfig ãŒæ­£å¼å¯¾å¿œã—ã¦ãŠã‚‰ãšè¦ä¿®æ­£
    ...fixupConfigRules(pluginReactConfig),
    {
      // ä¸Šã®ç†ç”±ã‹ã‚‰ä¸‹ã®ã‚ˆã†ã«å®šç¾©ä¸å¯
      // ã¾ãŸã€ä¸Šã§ react ã‚’ä¸€åº¦å®šç¾©ã™ã‚‹ã¨å†å®šç¾©ä¸å¯
      // plugins: {
      //  react: { ...pluginReactAllConfig, ...pluginReactConfig },
      // },

      settings: { react: { version: "detect" } },

      rules: {                                    // "off"=0, "warn"=1, "error"=2
        'react/react-in-jsx-scope': 'off',
        // 'React' must be in scope when using JSX  react/react-in-jsx-scope
        "react/jsx-uses-react": "off",

        'react/display-name': "warn",
        'react/jsx-key': "warn",
        //  Missing "key" prop for element in iterator
        'react/jsx-no-comment-textnodes': "warn",
        'react/jsx-no-duplicate-props': "warn",
        'react/jsx-no-target-blank': "warn",
        'react/jsx-no-undef': "warn",
        'react/jsx-uses-vars': "warn",
        'react/no-children-prop': "warn",
        'react/no-danger-with-children': "warn",
        'react/no-deprecated': "warn",
        'react/no-direct-mutation-state': "warn",
        'react/no-find-dom-node': "warn",
        'react/no-is-mounted': "warn",
        'react/no-render-return-value': "warn",
        'react/no-string-refs': "warn",
        'react/no-unescaped-entities': "warn",
        'react/no-unknown-property': "warn",
        'react/no-unsafe': 0,
        'react/prop-types': "warn",
        'react/require-render-return': "warn",
      },
    }

#-------------------------------
# å®Ÿè¡Œ
#-------------------------------
- ENTRY:
  EXPLAIN: CLI å®Ÿè¡Œ & Options
  BODY: |
    // â–  å®Ÿè¡Œ
    npx eslint [options] [file|dir|glob]*
    npx eslint file1.js file2.js
    npx eslint lib/**
    npx eslint                          // files ãŒè¨­å®šæ¸ˆã¿ãªã‚‰

    // â–  Options
    Basic configuration:
      --no-config-lookup                // eslint.config.js ã‚’ä½¿ç”¨ã—ãªã„
      -c, --config path::String         // eslint.config.jsãªã©ã‚’ä½¿ç”¨ã›ãšã€CLIã§å®šç¾©
      --inspect-config                  // Open the config inspector with the current configuration
      --global [String]                 // global å¤‰æ•°å®šç¾©
      --parser String                   // Parser æŒ‡å®š
      --parser-options Object           // Parser Options

    Specify Rules and Plugins:
      --plugin [String]                 // plugins æŒ‡å®š
      --rule Object                     // rules æŒ‡å®š

    Fix Problems:
      --fix                             // è‡ªå‹•ä¿®æ­£
      --fix-dry-run                     // ä¿å­˜ã›ãšã« è‡ªå‹•ä¿®æ­£
      --fix-type Array                  // è‡ªå‹•ä¿®æ­£ã‚¿ã‚¤ãƒ—(directive, problem, suggestion, layout)

    Ignore Files:
      --no-ignore                       // é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã›ãš
      --ignore-pattern [String]         // é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³

    Use stdin:
      --stdin                           // <STDIN> - default: false
      --stdin-filename String           // STDIN ãƒ•ã‚¡ã‚¤ãƒ«åæŒ‡å®š

    Handle Warnings:
      --quiet                           // ãƒ¬ãƒãƒ¼ãƒˆ errors ã®ã¿ - default: false
      --max-warnings Int                // è­¦å‘Šæ•° nonzero exit code - default: -1

    Output:
      -o, --output-file path::String    // ãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«PATH&å
      -f, --format String               // output format - default: stylish
      --color, --no-color               // è‰²

    Inline configuration comments:
      --no-inline-config                // è¨­å®šå¤‰æ›´ã«é–¢ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆç„¡è¦–
      --report-unused-disable-directives  // æœªä½¿ç”¨ eslint-disable, eslint-enable ãƒ¬ãƒãƒ¼ãƒˆè¿½åŠ 
      --report-unused-disable-directives-severity String
                                        // å ±å‘Šãƒ¬ãƒ™ãƒ«è¨­å®š off(0), warn(1), error(2)

    Caching:
      --cache                           // å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ - default: false
      [DEPR]--cache-file path::String   // cacheãƒ•ã‚¡ã‚¤ãƒ«
      --cache-location path::String     // cacheãƒ•ã‚¡ã‚¤ãƒ«
      --cache-strategy String           // å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«åˆ¤å®šæ–¹æ³• def: metadata or content

    Miscellaneous:
      --init                            // åˆå›è¨­å®š - default: false
      --env-info                        // ç’°å¢ƒå¤‰æ•°å ±å‘Š - default: false
      --no-error-on-unmatched-pattern   // Prevent errors when pattern is unmatched
      --exit-on-fatal-error             // Exit with exit code 2 in case of fatal error - default: false
      --no-warn-ignored                 // Suppress warnings when the file list includes ignored files
      --pass-on-no-patterns             // Exit with exit code 0 in case no file patterns are passed
      --debug                           // Output debugging information
      -h, --help                        // Show help
      -v, --version                     // Output the version number
      --print-config path::String       // Print the configuration for the given file
      --stats                           // Add statistics to the lint report - default: false

#-------------------------------
# Exception
#-------------------------------
- ENTRY:
  EXPLAIN: |
    ä¾‹å¤–: å˜æ•°è¡Œã‚’ãƒã‚§ãƒƒã‚¯ã‹ã‚‰é™¤å¤–
  BODY: |
    // eslint-disable-next-line
    // eslint-disable-next-line no-unused-vars    // ç‰¹å®š

    alert('foo'); // eslint-disable-line

    // eslint-disable-next-line
    alert('foo');

    /* eslint-disable-next-line */
    alert('foo');

    alert('foo'); /* eslint-disable-line */

- ENTRY:
  EXPLAIN: |
    ä¾‹å¤–: å›²ã„è¡Œã‚’ãƒã‚§ãƒƒã‚¯ã‹ã‚‰é™¤å¤–
  BODY: |
    /* eslint-disable */
    ...
    /* eslint-enable */

    /* eslint-disable no-unused-vars */
    ...
    /* eslint-enable no-unused-vars */
