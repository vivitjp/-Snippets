---
#-------------------------------
# Basic Components
#-------------------------------
- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.title
  CATEGORY: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.ä¸€èˆ¬
  EXPLAIN: ä¸€èˆ¬
  BODY: |
    â–  é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (å¼•æ•°ã§å‹æŒ‡å®š)

    type Props = { 
      title: string
    }

    function Title({ title }: Props) {
      return <h1>{title}</h1>
    }

    â–  React.FC (React.FunctionComponent)

    type Props = { 
      title: string
    }

    const TitleFC: React.FC<Props> = ({ title }) => (
      <h1>{title}</h1>
    )

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.children
  EXPLAIN: children
  BODY: |
    â–  React.PropsWithChildren

    ãƒ»PropsWithChildren ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ã‚’ä½¿ç”¨ã—ã¦ children ã‚’å«ã‚€ Props å‹ã‚’å®šç¾©

    type Props = { 
      title: string
      // children: React.ReactNode  // å®£è¨€ä¸è¦
    }

    const Labeled: React.FC<React.PropsWithChildren<Props>> = ({ title, children }) => (
      <div>
        <h1>{title}</h1>
        {children}
      </div>
    )

    â€»  const TitleFC: React.FC<Props> = ({ title, children }) => () // ã¯ã‚¨ãƒ©ãƒ¼

    â–  children ã¸ã®å¼•æ•°

    type Props = {
      title: string;
      children: (value: string) => React.ReactNode // æ˜ç¤ºçš„ã«å‹ã‚’å®šç¾©
    }

    const LabeledWithArg: React.FC<Props> = ({ title, children }) => (
      <div>
        <h1>{title}</h1>
        {children("å­è¦ç´ ã®å€¤")}
      </div>
    )

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.HTMLè¦ç´ 
  EXPLAIN: HTMLè¦ç´ 
  BODY: |
    â–  React.ComponentProps

    type InputProps = React.ComponentProps<'input'>  // HTMLè¦ç´ ã®Propså‹å–å¾—

    const TextInput = (props: InputProps) => {
      return <input {...props} />
    }

    â–  React.ComponentPropsWithRef

    type InputProps = React.ComponentPropsWithRef<'input'>

    const TextInput = React.forwardRef<HTMLInputElement, InputProps>((props, ref) => (
      <input ref={ref} {...props} />
    ))

    TextInput.displayName = 'TextInput'

    â–  React.forwardRef

    const MyBtn = React.forwardRef<
      HTMLButtonElement,
      React.ComponentPropsWithRef<'button'>
    >(
      (props, ref) => <button ref={ref} {...props} />
    )

    MyBtn.displayName = 'MyBtn'

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.ã‚¸ã‚§ãƒãƒªãƒƒã‚¯
  EXPLAIN: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯
  BODY: |
    â–  ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

    type Item<T> = { value: T }

    const ItemView = <T,>({ item }: { item: Item<T> }) => (
      <div>{String(item.value)}</div>
    )

    â–  ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ãƒƒã‚¯ï¼ˆas ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ & React.ElementType

    ãƒ»æ±ç”¨çš„ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã€ç•°ãªã‚‹HTMLè¦ç´ ã‚„ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¯èƒ½ã«ã™ã‚‹

    type PolymorphicProps<C extends React.ElementType, P> =
      P & { as?: C } & Omit<React.ComponentPropsWithRef<C>, keyof P | 'as'>

    const Box = <C extends React.ElementType = 'div'>(props: PolymorphicProps<C, { variant?: string }>) => {
      const { as: Component = 'div', variant, ...rest } = props as any
      return <Component {...rest} />
    }

    ãƒ»ä½¿ç”¨ä¾‹

    <Box variant="primary" />                  // divã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    <Box as="section" variant="secondary" />   // sectionã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    <Box as={MyBtn} onClick={() => {}} />      // MyBtnã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.è­˜åˆ¥å…±ç”¨ä½“
  EXPLAIN: è­˜åˆ¥å…±ç”¨ä½“
  BODY: |
    â–  è­˜åˆ¥å…±ç”¨ä½“ï¼ˆDiscriminated Unionï¼‰ã§å®‰å…¨ã«åˆ‡ã‚Šæ›¿ãˆã‚‹

    type AnchorProps = { as: 'a'; href: string }
    type ButtonProps = { as?: 'button'; onClick?: () => void }
    type LinkOrButton = (AnchorProps | ButtonProps) & { children?: React.ReactNode }

    const LinkOrButtonComp = (props: LinkOrButton) =>
      props.as === 'a'
        ? <a href={props.href}>{props.children}</a>
        : <button onClick={props.onClick}>{props.children}</button>

    <LinkOrButtonComp as="a" href="https://example.com">ãƒªãƒ³ã‚¯</LinkOrButtonComp>
    <LinkOrButtonComp onClick={() => alert('Clicked!')}>ãƒœã‚¿ãƒ³</LinkOrButtonComp>

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.é«˜éšã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  EXPLAIN: é«˜éšã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  BODY: |
    â–  é«˜éšã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Higher-Order Component, HOC) & React.ComponentType

    function withExtra<P>(Comp: React.ComponentType<P>) {
      return (props: P & { extra?: string }) => <Comp {...props} />
    }

    const BasicComp: React.FC<{ name: string }> = ({ name }) => <div>{name}</div>

    const EnhancedComp = withExtra(BasicComp)

    <EnhancedComp name="Test" extra="è¿½åŠ æƒ…å ±" />

- KEY: react.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ.ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ­ãƒƒãƒ—
  EXPLAIN: ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ­ãƒƒãƒ—
  BODY: |
    â–  ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ­ãƒƒãƒ—ï¼ˆRender Propï¼‰å‹

    type RenderProps = { children: (open: boolean) => JSX.Element }

    const Toggler = ({ children }: RenderProps) => {
      const [open, setOpen] = React.useState(false)
      return <div onClick={() => setOpen(v => !v)}>{children(open)}</div>
    }

    <Toggler>
      {(isOpen) => (
        <div>{isOpen ? 'é–‹ã„ã¦ã„ã¾ã™' : 'é–‰ã˜ã¦ã„ã¾ã™'}</div>
      )}
    </Toggler>

- KEY: react.å‹.title.è¦ç´ ãƒãƒ¼ãƒ‰
  CATEGORY: |
    Reactã®å‹: è¦ç´ ãƒãƒ¼ãƒ‰

- KEY: react.å‹.ReactNode
  EXPLAIN: React.ReactNode
  BODY: |
    â–  ç”¨é€”

    ãƒ»Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å­è¦ç´ ã®å‹ã‚’è¡¨ã™
    ãƒ»æ–‡å­—åˆ—ã€æ•°å€¤ã€Reactè¦ç´ ã€é…åˆ—ã€nullã€undefinedãªã©ã‚’å«ã‚€

    â–  å‹å®šç¾©

    type ReactNode =
      | ReactElement
      | string
      | number
      | boolean
      | null
      | undefined
      | ReactNodeArray
      | ReactPortal

    â–  ä½¿ç”¨ä¾‹

    const MyComponent: React.FC<{ children: React.ReactNode }> = ({ children }) => (
      <div>{children}</div>
    )

- KEY: react.å‹.ReactElement
  EXPLAIN: React.ReactElement
  BODY: |
    â–  ç”¨é€”

    ãƒ»JSXã‹ã‚‰ç”Ÿæˆã•ã‚Œã‚‹ React è¦ç´ ã®å‹ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æˆ»ã‚Šå€¤ã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã€‚

    â–  æ¦‚å¿µçš„ãªå®šç¾©

    type ReactElement<P = any, T extends string | JSXElementConstructor<any> = string | JSXElementConstructor<any>> = {
      type: T
      props: P
      key: React.Key | null
    }

    â–  ä½¿ç”¨ä¾‹

    const el: React.ReactElement = <div>Hello</div>

- KEY: react.å‹.title.ref
  CATEGORY: |
    Reactã®å‹: ref å‘¨ã‚Š

- KEY: react.å‹.RefObject
  EXPLAIN: React.RefObject
  BODY: |
    â–  ç”¨é€”

    ãƒ»`useRef` ãªã©ã§è¿”ã•ã‚Œã‚‹ä¸å¤‰ã®å‚ç…§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã€‚`.current` ã«è¦ç´ ã‚„å€¤ã‚’ä¿æŒã™ã‚‹ã€‚

    â–  å‹

    interface RefObject<T> {
      readonly current: T | null
    }

    â–  ä½¿ç”¨ä¾‹

    const ref = useRef<HTMLInputElement | null>(null)
    ref.current?.focus()
    React.RefObject<T>

- KEY: react.å‹.MutableRefObject
  EXPLAIN: React.MutableRefObject
  BODY: |
    â–  ç”¨é€”

    ãƒ»`.current` ã‚’è‡ªç”±ã«æ›´æ–°ã§ãã‚‹å¯å¤‰å‚ç…§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã€‚`useRef(initial)` ã®æˆ»ã‚Šå€¤ã®å…¸å‹å‹ã€‚

    â–  å‹

    interface MutableRefObject<T> {
      current: T
    }

    â–  ä½¿ç”¨ä¾‹

    const countRef = useRef<number>(0)
    countRef.current += 1
    React.MutableRefObject<T>

- KEY: react.å‹.Ref
  EXPLAIN: React.Ref
  BODY: |
    â–  ç”¨é€”

    ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„è¦ç´ ã®å‚ç…§ã‚’è¡¨ã™æ±ç”¨å‹ã€‚ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ ref ã‚„ RefObject ã‚’å—ã‘å–ã‚Œã‚‹ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã€‚

    â–  å‹ã®ä¾‹

    type Ref<T> = RefCallback<T> | RefObject<T> | null

    â–  ä½¿ç”¨ä¾‹

    const forwardRefComp = React.forwardRef<HTMLButtonElement, Props>((props, ref) => (
      <button ref={ref} />
    ))
    React.Ref<T>

- KEY: react.å‹.RefAttributes
  EXPLAIN: React.RefAttributes
  BODY: |
    â–  ç”¨é€”

    ãƒ»ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« `ref` ã‚’å‹ä»˜ã‘ã—ã¦æ¸¡ã™ãŸã‚ã®è£œåŠ©å‹ã€‚`forwardRef` ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã€‚

    â–  ä½¿ç”¨ä¾‹

    type Props = { value: string } & React.RefAttributes<HTMLDivElement>
    React.RefAttributes

- KEY: react.å‹.PropsWithoutRef
  EXPLAIN: React.PropsWithRef/PropsWithoutRef
  BODY: |
    â–  ç”¨é€”

    ãƒ»`PropsWithRef` ã¯ ref ã‚’å«ã‚ãŸ Props ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€`PropsWithoutRef` ã¯ ref ã‚’é™¤å¤–ã—ãŸ Props å‹ã‚’ä½œã‚‹ã€‚

    â–  ä½¿ç”¨ä¾‹

    type InputProps = React.ComponentPropsWithRef<'input'>
    type CleanProps = React.PropsWithoutRef<InputProps>

- KEY: react.å‹.title.å±æ€§å‹
  CATEGORY: |
    Reactã®å‹: HTML/DOM/SVGå±æ€§å‹

- KEY: react.å‹.HTML.HTMLAttributes
  EXPLAIN: HTMLAttributes
  BODY: |
    â–  ç”¨é€”

    ãƒ»ã»ã¨ã‚“ã©ã® HTML è¦ç´ ã«å…±é€šã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆ`className` / `style` / `onClick` ç­‰ï¼‰ã‚’ã¾ã¨ã‚ãŸå‹ã€‚

    â–  ä½¿ç”¨ä¾‹

    type DivProps = React.HTMLAttributes<HTMLDivElement>
    const Comp = (props: DivProps) => <div {...props} />

- KEY: react.å‹.DOM.DOMAttributes
  EXPLAIN: DOMAttributes
  BODY: |
    â–  ç”¨é€”

    ãƒ»DOM ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ï¼ˆ`onClick` / `onChange` / `onMouseEnter` ç­‰ï¼‰ã®å‹å®šç¾©ã‚’å«ã‚€åŸºåº•å‹ã€‚

    â–  ä½¿ç”¨ä¾‹

    type Clickable = { onClick?: React.MouseEventHandler }
    const Btn = ({ onClick }: Clickable) => <button onClick={onClick} />

- KEY: react.å‹.HTML.InputHTMLAttributes
  EXPLAIN: InputHTMLAttributes
  BODY: |
    â–  ç”¨é€”

    ãƒ»`<input>` è¦ç´ å›ºæœ‰ã®å±æ€§å‹ï¼ˆ`type` / `value` / `onChange` / `placeholder` ç­‰ï¼‰ã‚’å®šç¾©ã™ã‚‹ã€‚

    â–  ä½¿ç”¨ä¾‹

    const TextInput = (props: React.InputHTMLAttributes<HTMLInputElement>) => (
      <input {...props} />
    )

- KEY: react.å‹.HTML.ButtonHTMLAttributes
  EXPLAIN: ButtonHTMLAttributes
  BODY: |
    â–  ç”¨é€”

    ãƒ»`<button>` è¦ç´ å›ºæœ‰ã®å±æ€§å‹ï¼ˆ`type` / `disabled` / `onClick` ç­‰ï¼‰ã€‚

    â–  ä½¿ç”¨ä¾‹

    const MyButton = (props: React.ButtonHTMLAttributes<HTMLButtonElement>) => (
      <button {...props} />
    )

- KEY: react.å‹.HTML.AnchorHTMLAttributes
  EXPLAIN: AnchorHTMLAttributes
  BODY: |
    â–  ç”¨é€”

    ãƒ»`<a>` è¦ç´ å›ºæœ‰ã®å±æ€§å‹ï¼ˆ`href` / `target` / `rel` ç­‰ï¼‰ã€‚

    â–  ä½¿ç”¨ä¾‹

    const Link = (props: React.AnchorHTMLAttributes<HTMLAnchorElement>) => (
      <a {...props} />
    )

- KEY: react.å‹.SVG.SVGProps
  EXPLAIN: SVGProps
  BODY: |
    â–  ç”¨é€”

    ãƒ»SVG è¦ç´ ã«æ¸¡ã›ã‚‹å±æ€§ã®å‹ã€‚`width`/`height`/`fill`/`stroke` ç­‰ã‚’å«ã‚€ã€‚

    â–  ä½¿ç”¨ä¾‹

    const Icon = (props: React.SVGProps<SVGSVGElement>) => (
      <svg {...props} viewBox="0 0 24 24">...</svg>
    )

#-------------------------------
# Handler
#-------------------------------
- KEY: react.handler.category
  CATEGORY: ãƒãƒ³ãƒ‰ãƒ©

- KEY: react.handle
  EXPLAIN: ãƒãƒ³ãƒ‰ãƒ© ã‚µãƒ³ãƒ—ãƒ«
  BODY: |
    â–  Submit

    const handleSubmit = useCallback(
      (e: React.FormEvent<HTMLFormElement>) => {
        console.log(`text: ${text}`)
        e.stopPropagation()
        e.preventDefault()
      },
      [text]
    )

    â–  button ãƒãƒ³ãƒ‰ãƒ©

    const handleClickButton = useCallback(
      (e: React.MouseEvent<HTMLButtonElement>) => {
        e.stopPropagation()
      },
      []
    )

    â–  Click Input ãƒãƒ³ãƒ‰ãƒ©

    const handleClickInputButton = useCallback(
      (e: React.MouseEvent<HTMLInputElement>) => {
        e.stopPropagation()
      },
      []
    )


    â–  Change Text ãƒãƒ³ãƒ‰ãƒ©

    const handleChangeText = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = e.currentTarget.value
        setText(value)
      },
      []
    )

    â–  Change Checkbox ãƒãƒ³ãƒ‰ãƒ©

    const handleChangeCheck = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = e.currentTarget.checked
        setIsChecked(value)
      },
      []
    )

    â–  Change Radio ãƒãƒ³ãƒ‰ãƒ©

    const handleChangeRadio = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = parseInt(e.currentTarget.value ?? "0")
        setRadio(value)
      },
      []
    )

    â–  Change Select ãƒãƒ³ãƒ‰ãƒ©

    const [selectedValue, setSelectedValue] = useState<number>(1)

    const handleChangeSelect = useCallback(
      (e: React.ChangeEvent<HTMLSelectElement>) => {
        const value = parseInt(e.currentTarget.value ?? 1)
        setSelectedValue(value)
      },
      []
    )

- KEY: react.handle.button
  EXPLAIN: Button
  BODY: |
    const handleClickButton = useCallback(
      (e: React.MouseEvent<HTMLButtonElement>) => {
        e.stopPropagation()
      },
      []
    )

    <button onClick={handleClickButton} value="">
      Submit
    </button>

- KEY: react.handle.input.text
  EXPLAIN: Text
  BODY: |
    const handleChangeText = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = e.currentTarget.value
        setText(value)
      },
      []
    )

    <input
      type="text"
      onChange={handleChangeText}
      value={text}
      placeholder="name"
    />

- KEY: react.handle.input.button
  EXPLAIN: InputButton
  BODY: |
    const handleClickInputButton = useCallback(
      (e: React.MouseEvent<HTMLInputElement>) => {
        e.stopPropagation()
      },
      []
    )

    <input type="button" onClick={handleClick} value="Click" />

- KEY: react.handle.input.checkbox
  EXPLAIN: Checkbox
  BODY: |
    const handleChangeCheck = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = e.currentTarget.checked
        setIsChecked(value)
      },
      []
    )

    <input
      type="checkbox"
      id={checkId}
      onChange={handleChangeCheck}
      checked={isChecked}
    />
    <label htmlFor={checkId}>On</label>

- KEY: react.handle.input.radio
  EXPLAIN: Radio
  BODY: |
    const handleChangeRadio = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = parseInt(e.currentTarget.value ?? "0")
        setRadio(value)
      },
      []
    )

    <input
      type="radio"
      id={radioId1}
      name="myRadio"
      onChange={handleChangeRadio}
      value={1}
      checked={radio === 1}
    />
    <label htmlFor={radioId1}>1</label>

- KEY: react.handle.select
  EXPLAIN: Select
  BODY: |
    type Options = {
      title: string
      value: string
    }

    type Select = {
      options: Options[]
      handleChangeSelect: (e: React.ChangeEvent<HTMLSelectElement>) => void
    }

    const [selectedValue, setSelectedValue] = useState<number>(1)

    const handleChangeSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {
      const value = parseInt(e.currentTarget.value ?? 1)
      setSelectedValue(value)
    }

    const SelectSet = ({ options, onChange }: Select) => {
      return (
        <select onChange={handleChangeSelect}>
          {!!options.length &&
            options.map((n, index) => (
              <option key={index} value={n.value} >
                {n.title}
              </option>
            ))}
        </select>
      )
    }

#-------------------------------
# Hooks
#-------------------------------
- KEY: react.hooks.title
  CATEGORY: Hooks

- KEY: react.hooks.list
  EXPLAIN: Hooks ä¸€è¦§
  BODY: |
    ãƒ»useState                    // çŠ¶æ…‹ç®¡ç†
    ãƒ»useEffect                   // å‰¯ä½œç”¨å‡¦ç†
    ãƒ»useCallback                 // é–¢æ•°ã®ãƒ¡ãƒ¢åŒ–
    ãƒ»useMemo                     // å€¤ã®ãƒ¡ãƒ¢åŒ–
    ãƒ»useRef                      // å‚ç…§ã®ä¿æŒ
    ãƒ»useImperativeHandle         // è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã®æ“ä½œ
    ãƒ»useLayoutEffect             // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåŠ¹æœ
    ãƒ»useContext                  // ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†
    ãƒ»useReducer                  // çŠ¶æ…‹ç®¡ç†ï¼ˆReduxé¢¨ï¼‰
    ãƒ»useTransition               // é·ç§»çŠ¶æ…‹ç®¡ç†
    ãƒ»useDeferredValue            // é…å»¶å€¤ç®¡ç†
    ãƒ»useId                       // ä¸€æ„IDç”Ÿæˆ
    ãƒ»useSyncExternalStore        // å¤–éƒ¨ã‚¹ãƒˆã‚¢åŒæœŸ

#-------------------------------
# Hooks: useState
#-------------------------------
- KEY: react.hooks.useState
  EXPLAIN: useState
  BODY: |
    const [xxx, setXxx] = useState<string>("")
    const [xxx, setXxx] = useState<number>(0)
    const [xxx, setXxx] = useState<boolean>(false)
    const [xxx, setXxx] = useState<Map<string, any>>()
    const [xxx, setXxx] = useState<Set<string>>()

#-------------------------------
# Hooks: useEffect
#-------------------------------
- KEY: react.hooks.useEffect.åŸºæœ¬
  EXPLAIN: useEffect(åŸºæœ¬)
  BODY: |
    const [xxxxx, setXxxxx] = useState<Set<string>>()

#-------------------------------
# useEffect
#-------------------------------
- KEY: qw.hooks.useEffect.title
  CATEGORY: |
    Hooks: useEffect

- KEY: qw.useEffect
  EXPLAIN: useEffect(ã‚·ãƒ³ãƒ—ãƒ«)
  BODY: |
    useEffect(() => {
      // å‡¦ç†
    })                    // æ¯å›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«å®Ÿè¡Œ

    useEffect(() => {
      // å‡¦ç†
    }, [ä¾å­˜å¤‰æ•°])         // ä¾å­˜å¤‰æ•°ãŒå¤‰åŒ–ã—ãŸæ™‚ã«å®Ÿè¡Œ

    â–  Timeoutã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯

    useEffect(() => {
      let timeoutId: NodeJS.Timeout | null = null

      timeoutId = setTimeout(() => {
        // å‡¦ç†
      }, 1000)

      return () => {
        if (timeoutId) clearTimeout(timeoutId)
      }
    }, [])

- KEY: react.hooks.useEffect.éåŒæœŸ
  EXPLAIN: useEffect(éåŒæœŸ)
  BODY: |
    â–  éåŒæœŸ(async/await)

    useEffect(() => {
      const methodXxx = async () => {
        const xxx = await getXxx(xxxId)
      }
      methodXxx()
    }, [])

    â–  å³æ™‚é–¢æ•°

    useEffect(() => {
      (async (param:any) => {
        const xxx = await getXxx(xxxId)
      })(param)
    }, [])

    â–  éåŒæœŸ(Promise.then)

    useEffect(() => {
      getXxx()
        .then((xxx) => { ... })
        .catch((err) => { ...  })
      return () => {
        ... // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†
      }
    }, [])

- KEY: react.hooks.useEffect.fetch
  EXPLAIN: useEffect(fetch/v18)
  BODY: |
    â–  fetch (v18)

    useEffect(() => {
      let isRead = false

      fetch(URL)
        .then((res) => res.json())
        .then((json) => {
          if (!isRead) setXxx(json)
        })
        .catch((err) => { ... })

      return () => {
        isRead = true
      }
    }, [])

#-------------------------------
# Hooks: useLayoutEffect
#-------------------------------
- KEY: react.hooks.useLayoutEffect.åŸºæœ¬
  EXPLAIN: useLayoutEffect
  BODY: |
    â–  ç›®çš„

    ãƒ»DOMã®å¤‰æ›´ã‚’åŒæœŸçš„ã«è¡Œã†
    ãƒ»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‰ã«å‰¯ä½œç”¨ã‚’å®Ÿè¡Œ
    ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®è¨ˆç®—ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã®é©ç”¨ã«ä½¿ç”¨
    ãƒ»è¦–è¦šçš„ãªä¸æ•´åˆã‚’é˜²ã

    â–  åŸºæœ¬
    useLayoutEffect(() => {
      // å‡¦ç†
    }, [])  // ä¾å­˜é…åˆ—

    â–  useEffect ã¨ã®é•ã„

    ãƒ»useEffect ã¯éåŒæœŸã«å®Ÿè¡Œã•ã‚Œã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«å‰¯ä½œç”¨ã‚’å‡¦ç†
    ãƒ»useLayoutEffect ã¯åŒæœŸçš„ã«å®Ÿè¡Œã•ã‚Œã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‰ã«å‰¯ä½œç”¨ã‚’å‡¦ç†
    ãƒ»DOMã®èª­ã¿å–ã‚Šã‚„æ›¸ãè¾¼ã¿ãŒå¿…è¦ãªå ´åˆã¯ useLayoutEffect ã‚’ä½¿ç”¨

    â–  ã‚µãƒ³ãƒ—ãƒ«

    import React, { useLayoutEffect, useRef, useState } from 'react'  
    export const LayoutEffectExample = () => {
      const divRef = useRef<HTMLDivElement | null>(null)
      const [width, setWidth] = useState(0)

      useLayoutEffect(() => {
        if (divRef.current) {
          const rect = divRef.current.getBoundingClientRect()
          setWidth(rect.width)
        }
      }, [])

      return (
        <div>
          <div ref={divRef} style={{ width: '50%' }}>
            å¹…ã‚’æ¸¬å®šã™ã‚‹è¦ç´ 
          </div>
          <p>è¦ç´ ã®å¹…: {width}px</p>
        </div>
      )
    }

#-------------------------------
# Hooks: useCallback
#-------------------------------
- KEY: react.hooks.useCallback
  EXPLAIN: useCallback
  BODY: |
    â–  ç”¨é€”

    ãƒ»é–¢æ•°ã‚’ãƒ¡ãƒ¢åŒ–ã—ã€å†ç”Ÿæˆã‚’é˜²ã
    ãƒ»å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®ä¸å¿…è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢
    ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
    ãƒ»ä¾å­˜å¤‰æ•°ãŒå¤‰åŒ–ã—ãŸæ™‚ã®ã¿é–¢æ•°ã‚’å†ç”Ÿæˆ
    ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚„ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®å®‰å®šåŒ–
    ãƒ»å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã™é–¢æ•°ãŒæ¯å›æ–°ã—ã„å‚ç…§ã«ãªã‚‹ã®ã‚’é˜²ã

    â–  åŸºæœ¬

    const memoizedCallback = useCallback(() => {
      // å‡¦ç†
    }, [ä¾å­˜å¤‰æ•°])  // ä¾å­˜é…åˆ—ãŒãªã„å ´åˆã¯åˆå›ã®ã¿ç”Ÿæˆ

    â–  å¼•æ•°ãƒ»æˆ»ã‚Šå€¤ã‚ã‚Š

    const memoizedCallbackWithArg = useCallback((param: string) => {
      return param * 2
    }, [ä¾å­˜å¤‰æ•°])

    â–  ã‚µãƒ³ãƒ—ãƒ«

    const handleChangeText = useCallback(
      (e: React.ChangeEvent<HTMLInputElement>) => {
        const value = e.currentTarget.value
        setText(value)
      },
      []
    )

    <input
      type="text"
      onChange={handleChangeText}
      value={text}
      placeholder="name"
    />

#-------------------------------
# Hooks: useMemo
#-------------------------------

- KEY: react.hooks.useMemo
  EXPLAIN: useMemo
  BODY: |
    â–  åŸºæœ¬

    const memoizedValue = useMemo(() => {
      // è¨ˆç®—ã‚³ã‚¹ãƒˆã®é«˜ã„å‡¦ç†
      return computeExpensiveValue(a, b)
    }, [a, b])  // ä¾å­˜å¤‰æ•°ãŒå¤‰åŒ–ã—ãŸæ™‚ã«å†è¨ˆç®—

    â–  ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ/é…åˆ—ã®ãƒ¡ãƒ¢åŒ–
    const memoizedObject = useMemo(() => ({
      key1: value1,
      key2: value2,
    }), [value1, value2])

    â–  é–¢æ•°ã®ãƒ¡ãƒ¢åŒ–
    const memoizedCallback = useMemo(() => {
      return () => {
        doSomething(a, b)
      }
    }, [a, b])

    â–  ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒ¢åŒ–
    const MemoizedComponent = useMemo(() => {
      return <MyComponent prop1={value1} prop2={value2} />
    }, [value1, value2])

    â–  å‰¯ä½œç”¨ãŒã‚ã‚‹å ´åˆã¯ useEffect ã‚’ä½¿ã†
    useEffect(() => {
      // å‰¯ä½œç”¨ã®ã‚ã‚‹å‡¦ç†
      performSideEffect(data)
    }, [data])

    â–  å‰¯ä½œç”¨: ãƒ‡ãƒ¼ã‚¿ã®å–å¾—

    useEffect(() => {
      fetchData().then(data => setData(data))
    }, [])

    â–  å‰¯ä½œç”¨: ç›´æ¥çš„ãªDOMæ“ä½œ

    useEffect(() => {
      const element = document.getElementById('my-element')
      if (element) {  
        element.style.backgroundColor = 'yellow'
      }     
    }, [])

    â–  å‰¯ä½œç”¨: WebSocketã‚„ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š

    useEffect(() => {
      const handleResize = () => { ... }
      window.addEventListener('resize', handleResize)
      return () => {
        window.removeEventListener('resize', handleResize)
      }
    }, [])

#-------------------------------
# Hooks: useRef
#-------------------------------
- KEY: react.useRef.input
  EXPLAIN: useRef
  BODY: |
    â–  Inputãƒ•ã‚©ãƒ¼ã‚«ã‚¹

    import React, { useRef } from "react"

    export const FocusInput = () => {
      const inputRef = useRef<HTMLInputElement | null>(null)

      const handleFocus = () => {
        inputRef.current?.focus()
      }

      return (
        <>
          <input ref={inputRef} defaultValue="hello" />
          <button onClick={handleFocus}>Focus</button>
        </>
      )
    }

    â–  submit æ™‚ã«å€¤ã‚’èª­ã‚€ï¼ˆãƒ•ã‚©ãƒ¼ãƒ æ“ä½œï¼‰

    import React, { useRef } from "react"

    export const ReadValueForm = () => {
      const inputRef = useRef<HTMLInputElement | null>(null)

      const handleSubmit = (e: React.FormEvent) => {
        e.preventDefault()
        const val = inputRef.current?.value ?? ""
        // console.log("value:", val)
      }

      return (
        <form onSubmit={handleSubmit}>
          <input ref={inputRef} />
          <button type="submit">Submit</button>
        </form>
      )
    }

    â–  é null ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ³¨æ„ï¼‰

    import React, { useEffect, useRef } from "react"

    export const AutoFocusInput = () => {
      // åˆæœŸã¯ null(ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«å­˜åœ¨ã™ã‚‹å‰æ)
      const inputRef = useRef<HTMLInputElement>(null!) 

      useEffect(() => {
        inputRef.current.focus()
      }, [])

      return <input ref={inputRef} />
    }

- KEY: react.useRef.useRefã®é…åˆ—
  EXPLAIN: useRef é…åˆ—
  BODY: |
    â–  createRef ã‚’é…åˆ—ã§ä¿æŒï¼ˆè¦ç´ æ•°ãŒå›ºå®šã¾ãŸã¯åˆæœŸåŒ–æ™‚ã«æ±ºã¾ã‚‹å ´åˆï¼‰

    import React, { createRef, useRef } from "react"

    export const FixedRefs = () => {
      const count = 3
      const refs = useRef<Array<React.RefObject<HTMLInputElement>>>(() =>
        Array.from({ length: count }, () => createRef<HTMLInputElement>())
      )()

      const focusSecond = () => refs[0]?.current && refs[1].current?.focus()

      return (
        <>
          {refs.map((r, i) => <input key={i} ref={r} defaultValue={`#${i}`} />)}
          <button onClick={focusSecond}>Focus #1</button>
        </>
      )
    }

    â–  ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ ref ã‚’ä½¿ã†ï¼ˆå¯å¤‰é•·ãƒªã‚¹ãƒˆã§å‹ãŒã‚·ãƒ³ãƒ—ãƒ«ï¼‰

    import React, { useRef } from "react"

    export const CallbackRefs = ({ items }: { items: string[] }) => {
      const refs = useRef<Array<HTMLInputElement | null>>([])

      return (
        <>
          {items.map((it, i) => (
            <input
              key={i}
              defaultValue={it}
              ref={(el) => (refs.current[i] = el)}
            />
          ))}
          <button onClick={() => refs.current[0]?.focus()}>Focus first</button>
        </>
      )
    }

    â–  useCallback ã§å®‰å…¨ã«ã‚»ãƒƒãƒˆï¼ˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã”ã¨ã®å†ç”Ÿæˆã‚’æŠ‘åˆ¶ï¼‰

    import React, { useRef, useCallback } from "react"

    export const StableSetterRefs = ({ items }: { items: string[] }) => {
      const refs = useRef<(HTMLInputElement | null)[]>([])
      const setRef = useCallback((el: HTMLInputElement | null, idx: number) => {
        refs.current[idx] = el
      }, [])

      return (
        <>
          {items.map((it, i) => (
            <input key={i} defaultValue={it} ref={(el) => setRef(el, i)} />
          ))}
          <button onClick={() => refs.current[items.length - 1]?.focus()}>Focus last</button>
        </>
      )
    }

    â–  å‹ä»˜ããƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã§æ‰±ã„ã‚„ã™ãã™ã‚‹

    type InputRef = HTMLInputElement | null

    export const useInputRefs = (count: number) => {
      const refs = useRef<InputRef[]>([])
      const getRef = (i: number) => (el: HTMLInputElement | null) => (refs.current[i] = el)
      return { refs, getRef }
    }

    // ä½¿ã„æ–¹
    // const { refs, getRef } = useInputRefs(items.length)
    // <input ref={getRef(i)} />

- KEY: react.useRef.input.fileUpload
  EXPLAIN: useRef ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
  BODY: |
    import { Box, Button, Flex } from "@chakra-ui/react";
    import { ChangeEvent, Dispatch, SetStateAction, useRef, useState } from "react";

    type Props = {
      setSavedData: Dispatch<SetStateAction<string | undefined>>;
      type?: string;
    };

    export const FileUploadButton = ({
      setSavedData,
      type = ".txt",
    }: Props) => {
    }) => {
      const refInput = useRef<HTMLInputElement>(null);
      const handleButton = () => {
        refInput.current?.click();
      };
      const [msg, setMsg] = useState("");

      const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {
        if (!e.target.files || e.target.files.length === 0) {
          console.error("ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ");
          return;
        }

        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (event) => {
          const content = event.target?.result;
          try {
            setSavedData(content as string);
            setMsg("ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸ");
          } catch (error) {
            console.error(error);
            setMsg("ãƒ­ãƒ¼ãƒ‰å¤±æ•—ã—ã¾ã—ãŸ");
          }
        };
        reader.readAsText(file);
      };

      return (
        <Flex alignItems={"center"}>
          <Button onClick={handleButton}>ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨</Button>
          <input
            ref={refInput}
            hidden={true}
            type="file"
            accept={type}
            onChange={handleFileChange}
          />
          <Box ml={5}>{msg}</Box>
        </Flex>
      );
    };

#-------------------------------
# forwardRef
#-------------------------------

- KEY: react.useRef.forwardRef
  EXPLAIN: forwardRef
  BODY: |
    â–  ç”¨é€”

      è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®DOMè¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹

    â–  ã‚µãƒ³ãƒ—ãƒ«

    type Props = {
      text: string
      setText: React.Dispatch<React.SetStateAction<string>>
      title: string
    } & React.ComponentPropsWithRef<"input">

    export const InputRef = forwardRef<HTMLInputElement, Props>(
      ({ text, setText, title, ...args }, ref) => {
        const id = useId()

        â–  ãƒãƒ³ãƒ‰ãƒ©
        const handleChangeText = (e: React.ChangeEvent<HTMLInputElement>) => {
          const value = e.currentTarget.value
          setText(value)
        }

        return (
          <div>
            <label htmlFor={id}>{title}</label>
            <input {...args} id={id} ref={ref} onChange={handleChangeText} />
          </div>
        )
      }
    )

#-------------------------------
# Hooks: useReducer
#-------------------------------
- KEY: react.hooks.useReducer
  EXPLAIN: useReducer
  BODY: |
    â–  ç”¨é€”

      è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ã‚„è¤‡æ•°ã®çŠ¶æ…‹å¤‰åŒ–ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã¾ã¨ã‚ã‚‹

    â–  ã‚µãƒ³ãƒ—ãƒ« (flipé–¢æ•°)

    const [isTrue, flipFlag] = useReducer((flag: boolean) => !flag, false)


    â–  ã‚µãƒ³ãƒ—ãƒ« (ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼)

    type Action = { type: "up" } | { type: "reset"; payload: { counter: number } }
    type State = { counter: number }

    const callback = (state: State, action: Action): State => {
      switch (action.type) {
        case "up":
          return { counter: state.counter + 1 }
        case "reset":
          return { counter: action.payload.counter }
      }
    }

    const UseReducer = () => {
      const [myCounter, dispatch] = useReducer(callback, { counter: 0 })
      const handleClickUp = () => {
        dispatch({ type: "up" })
      }
      const handleClickDown = () => {
        dispatch({ type: "reset", payload: { counter: 0 } })
      }

      return (
        <Section>
          <DivCell>{myCounter.counter}</DivCell>
          <Button onClick={handleClickUp}>Up</Button>
          <Button onClick={handleClickDown}>Reset</Button>
        </Section>
      )
    }

#-------------------------------
# Hooks: useContext
#-------------------------------
- KEY: react.hooks.context
  EXPLAIN: useContext
  BODY: |
    â–  Context å®šç¾©ã¨ Provider

    import React, { createContext, useState, useContext, useEffect } from "react"
    import { useGetXXXHooks } from "../hooks/useGetXXXHooks"

    type DataType = {}
    type DataContextType = {
      data: DataType
      setData: (data: DataType) => void
    }

    const DataContext = createContext<DataContextType>({} as DataContextType)

    export const useContextHooks = () => {
      return useContext(DataContext)
    }

    export const ContextProvider = ({
      children,
    }: {
      children: React.ReactNode
    }) => {
      const { getData } = useGetXXXHooks()
      const [data, setData] = useState<DataType>()

      useEffect(() => {
        //getData(), setData()
      }, [])

      return (
        <DataContext.Provider value={{ data, setData }}>
          {children}
        </DataContext.Provider>
      )
    }

    â–  Usage ( ContextProvider ã§ãƒ©ãƒƒãƒ— )

    import { ContextProvider } from "....."

    export const UseContext = () => {
      return (
        <ContextProvider>
          <Component />
        </ContextProvider>
      )
    }

    â–  Component ( Context åˆ©ç”¨ä¾‹ )

    import { useContextHooks } from "....."
    export const Component = () => {
      const { data } = useContextHooks()
      return <Component data={data} />
    }

#-------------------------------
# Hooks: useId
#-------------------------------
- KEY: react.useId
  EXPLAIN: useId ãƒ¦ãƒ‹ãƒ¼ã‚¯IDç”Ÿæˆ
  BODY: |
    const xxxid = React.useId()

#-------------------------------
# Hooks: useImperativeHandle
#-------------------------------
- KEY: react.useImperativeHandle
  EXPLAIN: useImperativeHandle
  BODY: |
    â–  ç”¨é€”

    ãƒ»è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹
    ãƒ»React.forwardRef ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨
    ãƒ»React ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯16.8ä»¥é™ãŒå¿…è¦
    ãƒ»ä¸€èˆ¬çš„ã«ã¯é¿ã‘ã€ä»£ã‚ã‚Šã« props ã‚„ state ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã‚‹

    â–  ã‚µãƒ³ãƒ—ãƒ«

    import React, { useImperativeHandle, useRef, forwardRef } from "react"

    export type ImperativeHandleRef = {
      focusInput: () => void
    }

    export const ImperativeHandle = forwardRef<ImperativeHandleRef>((props, ref) => {
      const inputRef = useRef<HTMLInputElement>(null)

      useImperativeHandle(ref, () => ({
        focusInput: () => {
          inputRef.current?.focus()
        },
      }))

      return <input ref={inputRef} />
    })

#-------------------------------
# Custom & Render Hooks
#-------------------------------
- KEY: react.customHooks.title
  CATEGORY: ã‚«ã‚¹ã‚¿ãƒ Hook

- KEY: react.customHooks.closure
  EXPLAIN: ã‚«ã‚¹ã‚¿ãƒ Hook(ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£)
  BODY: |
    import { useCallback, useState } from "react"

    export type Xxx<T> = {
      init: T
    }

    export const useXxx = <T,>({ init }: Xxx<T>) => {
      const [value, setValue] = useState<typeof init>(init)

      const method = ğŸ”µuseCallback((val: typeof init) => {
        setValue(val)
      }, [])

      const JsxCompo = ğŸ”µuseCallback(() => {
        return <div>Hello</div>
      }, [])

      return { method, value, JsxCompo }
    }

- KEY: react.customHooks.renderHooks
  EXPLAIN: ãƒ¬ãƒ³ãƒ€ãƒ¼Hooks
  BODY: |
    type UseChecks = [boolean, () => JSX.Element]

    export const useChecks = (labels: string[]): UseChecks => {
      const [checkList, setCheckList] = useState(() => labels.map(() => false))

      const handleCheck = ğŸ”µuseCallback((target: number) => {
        setCheckList((checks) => checks.map((_, index: number) => index === target))
      }, [])

      const isAllChecked = ğŸ”µuseMemo(() => checkList.every((x) => x), [checkList] )

      const renderChecks = ğŸ”µuseCallback(() => (
        <Checks checkList={checkList} labels={labels} handler={handleCheck} />
      ), [checkList, labels, handleCheck])

      return [isAllChecked, renderChecks]
    }

- KEY: react.customHooks.åˆ†æ
  EXPLAIN: åˆ†æ
  BODY: |
    â–  Custom Hooks

      é•·æ‰€

    ãƒ»å†åˆ©ç”¨: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®çŠ¶æ…‹ãƒ»å‰¯ä½œç”¨ãƒ­ã‚¸ãƒƒã‚¯ã®å…±æœ‰
    ãƒ»åˆ†é›¢: UIã¨ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢ã«ã‚ˆã‚‹è–„ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    ãƒ»ãƒ†ã‚¹ãƒˆå®¹æ˜“: ãƒ­ã‚¸ãƒƒã‚¯å˜ä½“ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®å®Ÿæ–½
    ãƒ»å‹å®‰å…¨: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚’ç”¨ã„ãŸå‹å®‰å…¨è¨­è¨ˆ
    ãƒ»çµ„åˆã›: å°ã•ãªHooksã®çµ„åˆã›ã«ã‚ˆã‚‹è¤‡é›‘æŒ¯ã‚‹èˆã„ã®æ§‹ç¯‰

      çŸ­æ‰€

    ãƒ»æŠ½è±¡åŒ–éå‰°: éåº¦åˆ†å‰²ã«ã‚ˆã‚‹è¿½è·¡å›°é›£
    ãƒ»éš ã‚ŒãŸä¾å­˜: å†…éƒ¨å‰¯ä½œç”¨ã‚„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®éå¯è¦–åŒ–
    ãƒ»å†ãƒ¬ãƒ³ãƒ€ãƒ¼å•é¡Œ: æ¯å›ç”Ÿæˆã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ»é–¢æ•°ã«ã‚ˆã‚‹ä¸è¦å†ãƒ¬ãƒ³ãƒ€ãƒ¼ ğŸ”´
    ãƒ»ä¾å­˜é…åˆ—ãƒªã‚¹ã‚¯: useEffectç­‰ã®ä¾å­˜æ¼ã‚Œã«ã‚ˆã‚‹ãƒã‚°ãƒªã‚¹ã‚¯

    â–  Render Hooks

      é•·æ‰€

    ãƒ»UIã¨ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚»ãƒƒãƒˆå†åˆ©ç”¨: æç”»é–¢æ•°ä»˜ããƒ­ã‚¸ãƒƒã‚¯ã®å†åˆ©ç”¨
    ãƒ»é…ç½®æŸ”è»Ÿæ€§: è¦ªå´ã§ã®æç”»ä½ç½®ãƒ»ãƒ©ãƒƒãƒ—ã®è‡ªç”±åº¦
    ãƒ»è¤‡é›‘UIæŠ½è±¡åŒ–: è¤‡æ•°è¦ç´ ã®åˆæˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæä¾›

      çŸ­æ‰€

    ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ: å‚ç…§ä¸å®‰å®šã«ã‚ˆã‚‹å†ãƒ¬ãƒ³ãƒ€ãƒ¼å¢—åŠ 
    ãƒ»å¯èª­æ€§ä½ä¸‹: JSXã‚’Hookã‹ã‚‰è¿”ã™ã“ã¨ã«ã‚ˆã‚‹å®Ÿè£…ãƒ•ãƒ­ãƒ¼ã®åˆ†ã‹ã‚Šã«ãã• ğŸ”´
    ãƒ»ãƒ†ã‚¹ãƒˆå›°é›£: UIã¨ãƒ­ã‚¸ãƒƒã‚¯ã®çµåˆã«ã‚ˆã‚‹å˜ä½“ãƒ†ã‚¹ãƒˆã®é›£æ˜“åº¦ä¸Šæ˜‡
    ãƒ»Hookãƒ«ãƒ¼ãƒ«é•åãƒªã‚¹ã‚¯: ãƒ¬ãƒ³ãƒ€é–¢æ•°å†…ã§ã®ã•ã‚‰ã«Hookså‘¼ã³å‡ºã—ã®èª¤ã‚Š

    â–  å®Ÿå‹™ä¸Šã®æ³¨æ„ç‚¹ãƒ»æ¨å¥¨

    ãƒ»å„ªå…ˆæ–¹é‡: ãƒ­ã‚¸ãƒƒã‚¯ã¯Custom Hooksã€UIã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆæˆ
    ãƒ»è¿”ã‚Šå€¤è¨­è¨ˆ: state, handlers, helpersã‚’ä¸­å¿ƒã¨ã—ãŸè¿”å´è¨­è¨ˆ
    ãƒ»å®‰å®šåŒ–ç­–: é–¢æ•°ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯useCallback, useMemoã§ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®‰å®šåŒ–
    ãƒ»å‹ä»˜ã‘: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã¨ReturnTypeã§å…¥åŠ›å‡ºåŠ›ã‚’æ˜ç¤º
    ãƒ»å‘½åè¦ç´„: useXxxå½¢å¼ã®å˜ä¸€è²¬ä»»å‘½å
    ãƒ»ãƒ†ã‚¹ãƒˆæ–¹é‡: å‰¯ä½œç”¨ã¯ãƒ¢ãƒƒã‚¯ ãƒ­ã‚¸ãƒƒã‚¯ã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ, UIã¯RTLã‚„ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã§æ¤œè¨¼
    ãƒ»ä»£æ›¿æ¤œè¨: HOC, render, props, component compositionã¨ã®æ¯”è¼ƒæ¤œè¨
    ãƒ»è¨ˆæ¸¬é‡è¦–: React DevTools ã¨ Profilerã«ã‚ˆã‚‹ãƒ¬ãƒ³ãƒ€å›æ•°æ¸¬å®šã¨æœ€é©åŒ–åˆ¤æ–­

    â–  çµè«–

    ãƒ»åŸºæœ¬æ–¹é‡: ãƒ­ã‚¸ãƒƒã‚¯ã¯Custom Hooksã«ã‚ˆã‚‹å†åˆ©ç”¨ã€UIã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆæˆã«ã‚ˆã‚‹å†åˆ©ç”¨
    ãƒ»Render Hooksã¯é™å®šæ¡ç”¨: æ€§èƒ½å¯èª­æ€§ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç†è§£ã—ãŸä¸Šã§åˆ©ç”¨

- KEY: react.customHooks.å†ãƒ¬ãƒ³ãƒ€ãƒ¼å•é¡Œ
  EXPLAIN: å†ãƒ¬ãƒ³ãƒ€ãƒ¼å•é¡Œ
  BODY: |
    â–  æ‚ªã„ä¾‹

    // ãƒ¡ãƒ¢åŒ–ã•ã‚ŒãŸå­ï¼ˆæµ…ã„æ¯”è¼ƒ: props ã® === ã‚’ä½¿ã†ï¼‰
    const Child = React.memo(({ onAction, options }: { onAction: () => void; options: { label: string } }) => {
      const renders = useRef(0);
      console.log("Child render", ++renders.current);
      return (
        <div>
          <div>{options.label}</div>
          <button onClick={onAction}>Child Action</button>
        </div>
      );
    });

    // ã‚«ã‚¹ã‚¿ãƒ Hookï¼ˆæ‚ªã„å®Ÿè£…ï¼šé–¢æ•°/ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¯å›ç”Ÿæˆã—ã¦è¿”ã™ï¼‰
    function useBadCounter() {
      const [count, setCount] = useState(0);
      
      const handler = () => setCount((c) => c + 1);   // ğŸ”µæ”¹å–„ï¼šuseCallbackå¿…è¦

      const options = { label: `count=${count}` };    // ğŸ”µæ”¹å–„ï¼šuseMemoå¿…è¦

      return { count, handler, options };
    }

    // è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    export function ParentBad() {
      const { count, handler, options } = useBadCounter();  // æ¯å›æ–°ã—ã„ handler/options ã‚’å—ã‘å–ã‚‹
      
      console.log("ParentBad render count=", count);
      
      return (
        <div>
          <div>Parent count: {count}</div>
          <Child onAction={handler} options={options} />
        </div>
      );
    }
