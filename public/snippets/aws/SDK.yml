---
#-------------------------------
# AWS
#-------------------------------
- ENTRY:
  CATEGORY: 概要

- ENTRY:
  EXPLAIN: |
    SDK for JS in GitHub
  BODY: |
    ■ v2(2024-09-08 メンテモード, 2025-09-08 終了)
    https://github.com/aws/aws-sdk-js

    ■ v3
    https://github.com/aws/aws-sdk-js-v3

    ■ Example v3(※ URL内の「javascriptv3」確認)
    https://github.com/awsdocs/aws-doc-sdk-examples
    https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javascriptv3/example_code/ec2/hello.js

    ■ AWS Docs
    https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/introduction/

    ■ コードでの見分け方
      V2: import {...} from 'aws-sdk'
      V3: import {...} from '@aws-sdk/{service}'

- ENTRY:
  EXPLAIN: パッケージリスト
  BODY: |
    @aws-sdk/client-ec2                      # EC2: 仮想サーバー
    @aws-sdk/client-s3                       # S3: オブジェクトストレージ
    @aws-sdk/client-lambda                   # Lambda: サーバーレス関数
    @aws-sdk/client-dynamodb                 # DynamoDB: NoSQLデータベース
    @aws-sdk/client-cognito-identity         # Cognito Identity: ユーザーID管理
    @aws-sdk/client-cognito-identity-provider # Cognito IDP: ユーザー認証管理
    @aws-sdk/client-sts                      # STS: セキュリティトークンサービス
    @aws-sdk/client-api-gateway              # API Gateway: API管理
    @aws-sdk/client-cloudformation           # CloudFormation: インフラ自動化
    @aws-sdk/client-cloudfront               # CloudFront: CDN
    @aws-sdk/client-cloudwatch               # CloudWatch: 監視サービス
    @aws-sdk/client-ecr                      # ECR: コンテナレジストリ
    @aws-sdk/client-ecs                      # ECS: コンテナオーケストレーション
    @aws-sdk/client-efs                      # EFS: ファイルストレージ
    @aws-sdk/client-elastic-load-balancing   # ELB: ロードバランサー
    @aws-sdk/client-eventbridge              # EventBridge: イベントバス
    @aws-sdk/client-iam                      # IAM: アクセス管理
    @aws-sdk/client-kms                      # KMS: キー管理
    @aws-sdk/client-rds                      # RDS: リレーショナルデータベース
    @aws-sdk/client-redshift                 # Redshift: データウェアハウス
    @aws-sdk/client-route-53                 # Route 53: DNSサービス
    @aws-sdk/client-secrets-manager          # Secrets Manager: シークレット管理
    @aws-sdk/client-ses                      # SES: メール送信
    @aws-sdk/client-sns                      # SNS: 通知サービス
    @aws-sdk/client-sqs                      # SQS: メッセージキュー
    @aws-sdk/client-ssm                      # SSM: システムマネージャー
    @aws-sdk/client-waf                      # WAF: ウェブアプリファイアウォール
    @aws-sdk/client-xray                     # X-Ray: アプリケーショントレーシング
    @aws-sdk/client-athena                   # Athena: SQLクエリサービス
    @aws-sdk/client-batch                    # Batch: バッチジョブ
    @aws-sdk/client-codebuild                # CodeBuild: ビルドサービス
    @aws-sdk/client-codecommit               # CodeCommit: Gitリポジトリ
    @aws-sdk/client-codepipeline             # CodePipeline: CI/CDパイプライン
    @aws-sdk/client-connect                  # Connect: コンタクトセンター
    @aws-sdk/client-datasync                 # DataSync: データ転送
    @aws-sdk/client-direct-connect           # Direct Connect: 専用ネットワーク
    @aws-sdk/client-directory-service        # Directory Service: ディレクトリ管理
    @aws-sdk/client-docdb                    # DocumentDB: MongoDB互換
    @aws-sdk/client-elastic-beanstalk        # Elastic Beanstalk: アプリデプロイ
    @aws-sdk/client-elasticache              # ElastiCache: インメモリキャッシュ
    @aws-sdk/client-elasticsearch-service    # Elasticsearch: 検索サービス
    @aws-sdk/client-fsx                      # FSx: ファイルサーバー
    @aws-sdk/client-glacier                  # Glacier: アーカイブストレージ
    @aws-sdk/client-glue                     # Glue: ETLサービス
    @aws-sdk/client-guardduty                # GuardDuty: 脅威検知
    @aws-sdk/client-health                   # Health: サービスヘルス
    @aws-sdk/client-inspector                # Inspector: セキュリティ評価
    @aws-sdk/client-lakeformation            # Lake Formation: データレイク
    @aws-sdk/client-macie2                   # Macie: データセキュリティ
    @aws-sdk/client-memorydb                 # MemoryDB: Redis互換
    @aws-sdk/client-mq                       # MQ: メッセージブローカー
    @aws-sdk/client-neptune                  # Neptune: グラフデータベース
    @aws-sdk/client-opensearch               # OpenSearch: 検索エンジン
    @aws-sdk/client-organizations            # Organizations: アカウント管理
    @aws-sdk/client-outposts                 # Outposts: ハイブリッドクラウド

- ENTRY:
  EXPLAIN: |
    環境変数による認証情報設定
  BODY: |
    ■ 環境変数一覧

      AWS_ACCESS_KEY_ID         アクセスキーID
      AWS_SECRET_ACCESS_KEY     シークレットアクセスキー
      AWS_SESSION_TOKEN         セッショントークン (一時的な認証情報を使用する場合)
      AWS_REGION                デフォルトのリージョン設定 (例: us-west-2)
      AWS_PROFILE               使用するプロファイル名 (~/.aws/credentials または ~/.aws/config から)

    ■ 例 (Linux/Mac)

      export AWS_ACCESS_KEY_ID="your_access_key_id"
      export AWS_SECRET_ACCESS_KEY="your_secret_access_key"
      export AWS_SESSION_TOKEN="your_session_token"  # 必要に応じて
      export AWS_REGION="us-west-2"
      export AWS_PROFILE="default"  # 必要に応じて

    ■ 例 (Windows PowerShell)

      $env:AWS_ACCESS_KEY_ID="your_access_key_id"
      $env:AWS_SECRET_ACCESS_KEY="your_secret_access_key"
      $env:AWS_SESSION_TOKEN="your_session_token"  # 必要に応じて
      $env:AWS_REGION="us-west-2"
      $env:AWS_PROFILE="default"  # 必要に応じて

    ■ Profileの設定（Project単位の設定が可能）

      ~/.aws/credentials (Linux/Mac)
      C:\Users\USERNAME\.aws\credentials (Windows)

      [default]
      aws_access_key_id = your_access_key_id
      aws_secret_access_key = your_secret_access_key
      aws_session_token = your_session_token  # 必要に応じて

    ■ 設定の優先順位

      ※ 通常は、環境変数またはIAMロール

      コード内の明示的な設定:     new S3Client({ region: "..." }) コード内指定値
      環境変数:                  上記の AWS_REGION や AWS_ACCESS_KEY_ID など
      認証情報ファイル:           ~/.aws/credentials および ~/.aws/config ファイル
      EC2/ECS/LambdaのIAMロール: AWSインフラストラクチャ上で実行時の自動的に割り当てロール

- ENTRY:
  CATEGORY: EC2

- ENTRY:
  EXPLAIN: メソッド
  TABLE:
    OPTION:
      ALIGN:
        - left
        - left
        - left
      HAS_TITLE: true
      WIDTH:
        - 20%
        - 20%
    BODY: |
      コマンド名 (Command)	対応操作 (API Operation)	説明
      StartInstancesCommand	StartInstances	停止中のインスタンスを起動
      StopInstancesCommand	StopInstances	実行中のインスタンスを停止
      RebootInstancesCommand	RebootInstances	実行中のインスタンスを再起動
      TerminateInstancesCommand	TerminateInstances	インスタンスを終了（削除）
      DescribeInstancesCommand	DescribeInstances	インスタンスの情報を取得
      RunInstancesCommand	RunInstances	新しいインスタンスを起動
      CreateImageCommand	CreateImage	インスタンスのAMIを作成
      DescribeImagesCommand	DescribeImages	AMIの情報を取得
      AllocateAddressCommand	AllocateAddress	新しいElastic IPアドレスを割り当て
      AssociateAddressCommand	AssociateAddress	Elastic IPアドレスをインスタンスに関連付け
      DisassociateAddressCommand	DisassociateAddress	Elastic IPアドレスの関連付けを解除
      ReleaseAddressCommand	ReleaseAddress	Elastic IPアドレスを解放

- ENTRY:
  EXPLAIN: サンプル実装
  BODY: |
    ■ インストールパッケージ

      yarn add @aws-sdk/client-ec2

    ■ sample.js(v3)
      import { EC2Client, StartInstancesCommand } from "@aws-sdk/client-ec2"; // ES Modules import
      // const { EC2Client, StartInstancesCommand } = require("@aws-sdk/client-ec2"); // CommonJS import

      const client = new EC2Client(config);

      // StartInstancesRequest
      const input = {                     
        InstanceIds: [                    
          "i-1234567890abcdef0",          // InstanceId 必須
        ],
        AdditionalInfo: "STRING_VALUE",   // オプショナル
        DryRun: true || false,            // オプショナル
      };

      const command = new StartInstancesCommand(input);
      const response = await client.send(command);

    ■ 戻り値(StartInstancesResult)型
      {                                   
        StartingInstances: [
          {
            InstanceId: "STRING_VALUE",
            CurrentState: {                // InstanceState
              Code: Number("int"),
              Name: "pending" || "running" || "shutting-down" || "terminated" || "stopping" || "stopped",
            },
            PreviousState: {
              Code: Number("int"),
              Name: "pending" || "running" || "shutting-down" || "terminated" || "stopping" || "stopped",
            },
          },
        ],
      };

    ■ 戻り値サンプル
      {
        StartingInstances: [
          {
            CurrentState: {
              Code: 0,
              Name: "pending"
            },
            InstanceId: "i-1234567890abcdef0",
            PreviousState: {
              Code: 80,
              Name: "stopped"
            }
          }
        ]
      }

- ENTRY:
  CATEGORY: S3

- ENTRY:
  EXPLAIN: メソッド
  TABLE:
    OPTION:
      ALIGN:
        - left
        - left
        - left
      HAS_TITLE: true
      WIDTH:
        - 20%
        - 20%
    BODY: |
      コマンド名 (Command)	対応操作 (API Operation)	説明
      PutObjectCommand	PutObject	バケットにオブジェクト（ファイル）をアップロード
      GetObjectCommand	GetObject	バケットからオブジェクトをダウンロード（取得）
      DeleteObjectCommand	DeleteObject	バケット内の単一のオブジェクトを削除
      ListBucketsCommand	ListBuckets	アカウントが所有するすべてのバケットを一覧表示
      ListObjectsV2Command	ListObjectsV2	バケット内のオブジェクトのリストを取得
      CopyObjectCommand	CopyObject	オブジェクトを別の場所にコピー
      CreateBucketCommand	CreateBucket	新しいバケットを作成
      DeleteBucketCommand	DeleteBucket	空のバケットを削除
      HeadObjectCommand	HeadObject	オブジェクトのメタデータを取得
      PutBucketPolicyCommand	PutBucketPolicy	バケットのポリシーを設定または更新
      GetBucketPolicyCommand	GetBucketPolicy	バケットのポリシーを取得
      DeleteBucketPolicyCommand	DeleteBucketPolicy	バケットのポリシーを削除

- ENTRY:
  EXPLAIN: サンプル実装
  BODY: |
    ■ パッケージ
    npm install @aws-sdk/client-s3 @aws-sdk/client-lambda

    ■ 実装
    import { S3Client, ListBucketsCommand } from "@aws-sdk/client-s3";

    // 1. クライアントの作成（リージョン指定、認証情報は環境変数やIAMロールから自動ロード）
    const s3Client = new S3Client({ region: "ap-northeast-1" });

    async function listAllS3Buckets() {
      const command = new ListBucketsCommand({});

      try {
        const data = await s3Client.send(command);
        console.log("バケット一覧:", data.Buckets);
        return data;
      } catch (error) {
        console.error("エラーが発生しました:", error);
        throw error;
      }
    }

- ENTRY:
  CATEGORY: Lambda

- ENTRY:
  EXPLAIN: メソッド
  TABLE:
    OPTION:
      ALIGN:
        - left
        - left
        - left
      HAS_TITLE: true
      WIDTH:
        - 20%
        - 20%
    BODY: |
      コマンド名 (Command)	対応操作 (API Operation)	説明
      InvokeCommand	Invoke	Lambda関数を呼び出す
      CreateFunctionCommand	CreateFunction	新しいLambda関数を作成
      DeleteFunctionCommand	DeleteFunction	既存のLambda関数を削除
      UpdateFunctionCodeCommand	UpdateFunctionCode	Lambda関数のコードを更新
      GetFunctionCommand	GetFunction	Lambda関数の設定とコードの情報を取得
      ListFunctionsCommand	ListFunctions	アカウント内のすべてのLambda関数を一覧表示
      AddPermissionCommand	AddPermission	Lambda関数にアクセス許可を追加
      RemovePermissionCommand	RemovePermission	Lambda関数からアクセス許可を削除
      CreateAliasCommand	CreateAlias	Lambda関数のエイリアスを作成
      UpdateAliasCommand	UpdateAlias	Lambda関数のエイリアスを更新

- ENTRY:
  EXPLAIN: サンプル実装
  BODY: |
    作成中

- ENTRY:
  CATEGORY: DynamoDB

- ENTRY:
  EXPLAIN: メソッド
  TABLE:
    OPTION:
      ALIGN:
        - left
        - left
        - left
      HAS_TITLE: true
      WIDTH:
        - 20%
        - 20%
    BODY: |
      コマンド名 (Command)	対応操作 (API Operation)	説明
      PutItemCommand	PutItem	テーブルに新しいアイテムを追加
      GetItemCommand	GetItem	テーブルから単一のアイテムを取得
      UpdateItemCommand	UpdateItem	既存のアイテムを更新
      DeleteItemCommand	DeleteItem	テーブルから単一のアイテムを削除
      ScanCommand	Scan	テーブル内のすべてのアイテムをスキャン
      QueryCommand	Query	特定の条件に基づいてアイテムをクエリ
      CreateTableCommand	CreateTable	新しいDynamoDBテーブルを作成
      DeleteTableCommand	DeleteTable	既存のDynamoDBテーブルを削除
      DescribeTableCommand	DescribeTable	DynamoDBテーブルの情報を取得
      BatchWriteItemCommand	BatchWriteItem	複数のアイテムを一括で書き込み
      BatchGetItemCommand	BatchGetItem	複数のアイテムを一括で取得

- ENTRY:
  EXPLAIN: サンプル実装
  BODY: |
    作成中
